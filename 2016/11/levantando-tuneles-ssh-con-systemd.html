<!DOCTYPE html>
<html lang="es" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Levantando túneles SSH con systemd - Linux Sysadmin</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://www.linuxsysadmin.ml/2016/11/levantando-tuneles-ssh-con-systemd.html">

        <meta name="author" content="Gerard" />
        <meta name="keywords" content="ssh,túnel,systemd" />
        <meta name="description" content="Ya vimos en un artículo anterior como levantar túneles SSH para llegar a través del protocolo SSH, a destinos que no están alcanzables normalmente. Esto está muy bien para aplicaciones puntuales, pero si tenemos que usar esos túneles una temporada, y deseamos que se mantengan levantados, ya es mas difícil …" />

        <meta property="og:site_name" content="Linux Sysadmin" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Levantando túneles SSH con systemd"/>
        <meta property="og:url" content="https://www.linuxsysadmin.ml/2016/11/levantando-tuneles-ssh-con-systemd.html"/>
        <meta property="og:description" content="Ya vimos en un artículo anterior como levantar túneles SSH para llegar a través del protocolo SSH, a destinos que no están alcanzables normalmente. Esto está muy bien para aplicaciones puntuales, pero si tenemos que usar esos túneles una temporada, y deseamos que se mantengan levantados, ya es mas difícil …"/>
        <meta property="article:published_time" content="2016-11-14" />
            <meta property="article:section" content="Operaciones" />
            <meta property="article:tag" content="ssh" />
            <meta property="article:tag" content="túnel" />
            <meta property="article:tag" content="systemd" />
            <meta property="article:author" content="Gerard" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://www.linuxsysadmin.ml/theme/css/bootstrap.cosmo.min.css" type="text/css"/>
    <link href="https://www.linuxsysadmin.ml/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://www.linuxsysadmin.ml/theme/css/pygments/vim.css" rel="stylesheet">
    <link rel="stylesheet" href="https://www.linuxsysadmin.ml/theme/css/style.css" type="text/css"/>
        <link href="https://www.linuxsysadmin.ml/static/custom.css" rel="stylesheet">

        <link href="https://www.linuxsysadmin.ml/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Linux Sysadmin ATOM Feed"/>



        <link href="https://www.linuxsysadmin.ml/feeds/operaciones.atom.xml" type="application/atom+xml" rel="alternate"
              title="Linux Sysadmin Operaciones ATOM Feed"/>

    <!-- Begin Cookie Consent plugin by Silktide - http://silktide.com/cookieconsent -->
    <script type="text/javascript">
        window.cookieconsent_options = {"message":"De acuerdo a la ley vigente, estoy obligado a informarte de la obviedad de que este sitio utiliza cookies.","dismiss":"Acepto","learnMore":"Mas información","link":null,"theme":"dark-bottom"};
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js"></script>
    <!-- End Cookie Consent plugin -->

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://www.linuxsysadmin.ml/" class="navbar-brand">
Linux Sysadmin            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://www.linuxsysadmin.ml/about.html">
                             Sobre mí
                          </a></li>
                         <li><a href="https://www.linuxsysadmin.ml/curriculum.html">
                             Curriculum Vitae
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://www.linuxsysadmin.ml/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archivos</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
            <ol class="breadcrumb">
                <li><a href="https://www.linuxsysadmin.ml" title="Linux Sysadmin"><i class="fa fa-home fa-lg"></i></a></li>
                <li><a href="https://www.linuxsysadmin.ml/category/operaciones.html" title="Operaciones">Operaciones</a></li>
                <li class="active">Levantando túneles SSH con systemd</li>
            </ol>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Banner linuxsysadmin -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6984858420847602"
     data-ad-slot="7977846974"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://www.linuxsysadmin.ml/2016/11/levantando-tuneles-ssh-con-systemd.html"
                       rel="bookmark"
                       title="Permalink to Levantando túneles SSH con systemd">
                        Levantando túneles SSH con systemd
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Fecha</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-11-14T08:00:00+01:00"> 2016-11-14</time>
    </span>


            <span class="label label-default">Autor</span>
            <a href="https://www.linuxsysadmin.ml/author/gerard.html"><i class="fa fa-user"></i> Gerard</a>

        <span class="label label-default">Tiempo de lectura</span> 6 minutos
        <span class="label label-default">Categoría</span>
        <a href="https://www.linuxsysadmin.ml/category/operaciones.html">Operaciones</a>


<span class="label label-default">Tags</span>
	<a href="https://www.linuxsysadmin.ml/tag/ssh.html">ssh</a>
        /
	<a href="https://www.linuxsysadmin.ml/tag/tunel.html">túnel</a>
        /
	<a href="https://www.linuxsysadmin.ml/tag/systemd.html">systemd</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Ya vimos en un <a href="https://www.linuxsysadmin.ml/2016/10/creando-tuneles-con-ssh.html">artículo anterior</a> como levantar túneles <strong>SSH</strong> para llegar a través del protocolo <strong>SSH</strong>, a destinos que no están alcanzables normalmente. Esto está muy bien para aplicaciones puntuales, pero si tenemos que usar esos túneles una temporada, y deseamos que se mantengan levantados, ya es mas difícil.</p>
<p>Hay miles de gestores de procesos que pueden hacer este trabajo por nosotros, como <strong>runit</strong>, <strong>monit</strong>, <strong>supervisor</strong> entre otros. Personalmente no soy fan de instalar nada que proporcione una funcionalidad duplicada, así que... ¿por que no <strong>systemd</strong>?</p>
<p>Para este tutorial vamos a suponer que tenemos acceso a un servidor intermedio con <strong>SSH</strong>, que ve a un servidor de bases de datos, y a través del que vamos a hacer el salto. Respectivamente, los vamos a llamar <em>jump</em> y <em>database</em>, en una explosión de creatividad.</p>
<h2>El túnel básico</h2>
<p>Lo primero es darnos cuenta que no llegamos a la base de datos; no importa que intentemos conectar a <em>localhost</em> o a <em>database</em> directamente. No llegamos y punto.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~$ mongo
MongoDB shell version: <span class="m">3</span>.2.10
connecting to: <span class="nb">test</span>
<span class="m">2016</span>-10-17T15:39:25.766+0200 W NETWORK  <span class="o">[</span>thread1<span class="o">]</span> Failed to connect to <span class="m">127</span>.0.0.1:27017, reason: errno:111 Connection refused
<span class="m">2016</span>-10-17T15:39:25.766+0200 E QUERY    <span class="o">[</span>thread1<span class="o">]</span> Error: couldn<span class="err">&#39;</span>t connect to server <span class="m">127</span>.0.0.1:27017, connection attempt failed :
connect@src/mongo/shell/mongo.js:229:14
@<span class="o">(</span>connect<span class="o">)</span>:1:6

exception: connect failed
gerard@aldebaran:~$ 
</pre></div>


<p>Vamos a levantar un túnel <strong>SSH</strong> que muestre en el puerto local 27017 el destino <em>database</em>, al puerto 27017, tal como lo ve el servidor de salto.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~$ ssh -L <span class="m">27017</span>:database:27017 jump@jump -N
Warning: Permanently added <span class="s1">&#39;jump&#39;</span> <span class="o">(</span>ECDSA<span class="o">)</span> to the list of known hosts.
</pre></div>


<p>Es especialmente importante que pongamos autenticación por claves, de forma que no nos pida la contraseña para levantar el túnel. Ahora no es un gran problema, pero si pretendemos que lo haga <strong>systemd</strong>, no podemos instruirle a poner una contraseña dada.</p>
<p>Ahora podemos comprobar que si llegamos a la base de datos, en nuestro puerto local:</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~$ mongo
MongoDB shell version: <span class="m">3</span>.2.10
connecting to: <span class="nb">test</span>
Server has startup warnings: 
<span class="m">2016</span>-10-17T13:29:27.640+0000 I CONTROL  <span class="o">[</span>initandlisten<span class="o">]</span> 
<span class="m">2016</span>-10-17T13:29:27.640+0000 I CONTROL  <span class="o">[</span>initandlisten<span class="o">]</span> ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is <span class="s1">&#39;always&#39;</span>.
<span class="m">2016</span>-10-17T13:29:27.640+0000 I CONTROL  <span class="o">[</span>initandlisten<span class="o">]</span> **        We suggest setting it to <span class="s1">&#39;never&#39;</span>
<span class="m">2016</span>-10-17T13:29:27.640+0000 I CONTROL  <span class="o">[</span>initandlisten<span class="o">]</span> 
&gt; db.serverBuildInfo<span class="o">()</span>
<span class="o">{</span>
    <span class="s2">&quot;version&quot;</span> : <span class="s2">&quot;3.2.10&quot;</span>,
    <span class="s2">&quot;gitVersion&quot;</span> : <span class="s2">&quot;79d9b3ab5ce20f51c272b4411202710a082d0317&quot;</span>,
    <span class="s2">&quot;modules&quot;</span> : <span class="o">[</span> <span class="o">]</span>,
    <span class="s2">&quot;allocator&quot;</span> : <span class="s2">&quot;tcmalloc&quot;</span>,
    <span class="s2">&quot;javascriptEngine&quot;</span> : <span class="s2">&quot;mozjs&quot;</span>,
    <span class="s2">&quot;sysInfo&quot;</span> : <span class="s2">&quot;deprecated&quot;</span>,
    <span class="s2">&quot;versionArray&quot;</span> : <span class="o">[</span>
        <span class="m">3</span>,
        <span class="m">2</span>,
        <span class="m">10</span>,
        <span class="m">0</span>
    <span class="o">]</span>,
    <span class="s2">&quot;openssl&quot;</span> : <span class="o">{</span>
        <span class="s2">&quot;running&quot;</span> : <span class="s2">&quot;OpenSSL 1.0.1t  3 May 2016&quot;</span>,
        <span class="s2">&quot;compiled&quot;</span> : <span class="s2">&quot;OpenSSL 1.0.1t  3 May 2016&quot;</span>
    <span class="o">}</span>,
    <span class="s2">&quot;buildEnvironment&quot;</span> : <span class="o">{</span>
        <span class="s2">&quot;distmod&quot;</span> : <span class="s2">&quot;debian81&quot;</span>,
        <span class="s2">&quot;distarch&quot;</span> : <span class="s2">&quot;x86_64&quot;</span>,
        <span class="s2">&quot;cc&quot;</span> : <span class="s2">&quot;/opt/mongodbtoolchain/bin/gcc: gcc (GCC) 4.8.2&quot;</span>,
        <span class="s2">&quot;ccflags&quot;</span> : <span class="s2">&quot;-fno-omit-frame-pointer -fPIC -fno-strict-aliasing -ggdb -pthread -Wall -Wsign-compare -Wno-unknown-pragmas -Winvalid-pch -Werror -O2 -Wno-unused-local-typedefs -Wno-unused-function -Wno-deprecated-declarations -Wno-unused-but-set-variable -Wno-missing-braces -fno-builtin-memcmp&quot;</span>,
        <span class="s2">&quot;cxx&quot;</span> : <span class="s2">&quot;/opt/mongodbtoolchain/bin/g++: g++ (GCC) 4.8.2&quot;</span>,
        <span class="s2">&quot;cxxflags&quot;</span> : <span class="s2">&quot;-Wnon-virtual-dtor -Woverloaded-virtual -Wno-maybe-uninitialized -std=c++11&quot;</span>,
        <span class="s2">&quot;linkflags&quot;</span> : <span class="s2">&quot;-fPIC -pthread -Wl,-z,now -rdynamic -fuse-ld=gold -Wl,-z,noexecstack -Wl,--warn-execstack&quot;</span>,
        <span class="s2">&quot;target_arch&quot;</span> : <span class="s2">&quot;x86_64&quot;</span>,
        <span class="s2">&quot;target_os&quot;</span> : <span class="s2">&quot;linux&quot;</span>
    <span class="o">}</span>,
    <span class="s2">&quot;bits&quot;</span> : <span class="m">64</span>,
    <span class="s2">&quot;debug&quot;</span> : false,
    <span class="s2">&quot;maxBsonObjectSize&quot;</span> : <span class="m">16777216</span>,
    <span class="s2">&quot;storageEngines&quot;</span> : <span class="o">[</span>
        <span class="s2">&quot;devnull&quot;</span>,
        <span class="s2">&quot;ephemeralForTest&quot;</span>,
        <span class="s2">&quot;mmapv1&quot;</span>,
        <span class="s2">&quot;wiredTiger&quot;</span>
    <span class="o">]</span>,
    <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span>
<span class="o">}</span>
&gt; 
</pre></div>


<h2>Añadiendo systemd a la ecuación</h2>
<p>Vamos a escribir nuestro propio <em>service</em> de <strong>systemd</strong>. Para ello, vamos a seguir <a href="https://www.linuxsysadmin.ml/2015/11/escribiendo-units-en-systemd.html">otro artículo</a>. Solo por la posibilidad de tener que levantar varios túneles, vale la pena usar las plantillas. Como solo podemos pasar un parámetro al <em>service</em>, vamos a crear un <em>script</em> que nos permita elegir los parámetros del túnel en función de una palabra clave.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~$ cat /home/gerard/bin/tunnel_to.sh 
<span class="c1">#!/bin/bash</span>

<span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> in
  database<span class="o">)</span> ssh -L <span class="m">27017</span>:database:27017 jump@localhost -N <span class="p">;;</span>
<span class="k">esac</span>
gerard@aldebaran:~/docker/systemd-tunnel$ 
</pre></div>


<p>Y le damos permisos de ejecución.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~/docker/systemd-tunnel$ chmod +x /home/gerard/bin/tunnel_to.sh 
gerard@aldebaran:~/docker/systemd-tunnel$ 
</pre></div>


<p>De momento tenemos el mismo túnel, pero simplificado a un <em>script</em> con un solo parámetro:</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~$ tunnel_to.sh database
Warning: Permanently added <span class="s1">&#39;localhost&#39;</span> <span class="o">(</span>ECDSA<span class="o">)</span> to the list of known hosts.
</pre></div>


<p>Vamos a trabajar en las carpetas de sistema de <strong>systemd</strong>, en donde se supone que, por convención, debemos dejar nuestras <em>units</em>.</p>
<div class="highlight"><pre><span></span>root@aldebaran:~# <span class="nb">cd</span> /etc/systemd/system/
root@aldebaran:/etc/systemd/system# 
</pre></div>


<p>Siguiendo el citado artículo, creamos la plantilla base que va a invocar el <em>script</em> de los túneles, con el parámetro que le demos.</p>
<div class="highlight"><pre><span></span>root@aldebaran:/etc/systemd/system# cat tunnel<span class="se">\@</span>.service 
<span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>SSH Tunnel

<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">User</span><span class="o">=</span>gerard
<span class="nv">ExecStart</span><span class="o">=</span>/home/gerard/bin/tunnel_to.sh %i
<span class="nv">Restart</span><span class="o">=</span>always

<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
root@aldebaran:/etc/systemd/system# 
</pre></div>


<p>Creamos un <em>soft link</em> para cada uno de los túneles que queramos levantar:</p>
<div class="highlight"><pre><span></span>root@aldebaran:/etc/systemd/system# ls -lh tunnel*
lrwxrwxrwx <span class="m">1</span> root root  <span class="m">15</span> oct <span class="m">17</span> <span class="m">15</span>:43 tunnel@database.service -&gt; tunnel@.service
-rw-r--r-- <span class="m">1</span> root root <span class="m">134</span> oct <span class="m">17</span> <span class="m">15</span>:43 tunnel@.service
root@aldebaran:/etc/systemd/system# 
</pre></div>


<p>De esta forma, el servicio <em>tunnel@database</em> va a levantar el <em>script</em> con el parámetro <em>database</em>, que a su vez, va a levantar el túnel como le hayamos indicado. Activamos el servicio para futuros reinicios de la máquina, y lo levantamos para esta sesión.</p>
<div class="highlight"><pre><span></span>root@aldebaran:/etc/systemd/system# systemctl <span class="nb">enable</span> tunnel@database
Created symlink from /etc/systemd/system/multi-user.target.wants/tunnel@database.service to /etc/systemd/system/tunnel@.service.
root@aldebaran:/etc/systemd/system# systemctl start tunnel@database
root@aldebaran:/etc/systemd/system# 
</pre></div>


<p>Y ya podemos comprobar como el túnel está levantado, sea mediante la inspección de los procesos en <em>runtime</em> o directamente accediendo a la base de datos.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~$ mongo
MongoDB shell version: <span class="m">3</span>.2.10
connecting to: <span class="nb">test</span>
Server has startup warnings: 
<span class="m">2016</span>-10-17T13:29:27.640+0000 I CONTROL  <span class="o">[</span>initandlisten<span class="o">]</span> 
<span class="m">2016</span>-10-17T13:29:27.640+0000 I CONTROL  <span class="o">[</span>initandlisten<span class="o">]</span> ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is <span class="s1">&#39;always&#39;</span>.
<span class="m">2016</span>-10-17T13:29:27.640+0000 I CONTROL  <span class="o">[</span>initandlisten<span class="o">]</span> **        We suggest setting it to <span class="s1">&#39;never&#39;</span>
<span class="m">2016</span>-10-17T13:29:27.640+0000 I CONTROL  <span class="o">[</span>initandlisten<span class="o">]</span> 
&gt; <span class="nb">exit</span>
bye
gerard@aldebaran:~$ ps faux <span class="p">|</span> grep database <span class="p">|</span> grep -v grep
gerard   <span class="m">22679</span>  <span class="m">0</span>.0  <span class="m">0</span>.0  <span class="m">13228</span>  <span class="m">2632</span> ?        Ss   <span class="m">15</span>:46   <span class="m">0</span>:00 /bin/bash /home/gerard/bin/tunnel_to.sh database
gerard   <span class="m">22680</span>  <span class="m">0</span>.0  <span class="m">0</span>.0  <span class="m">44428</span>  <span class="m">5320</span> ?        S    <span class="m">15</span>:46   <span class="m">0</span>:00  <span class="se">\_</span> ssh -L <span class="m">27017</span>:database:27017 jump@localhost -N
gerard@aldebaran:~$ 
</pre></div>


<p>Solo nos queda comprobar que si matamos el proceso, simulando que se cae solo, <strong>systemd</strong> se encarga de levantarlo de nuevo, en honor a la directiva <em>reload=always</em>.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~$ <span class="nb">kill</span> <span class="m">22679</span>
gerard@aldebaran:~$ ps faux <span class="p">|</span> grep database <span class="p">|</span> grep -v grep
gerard@aldebaran:~$ 
</pre></div>


<p>Y antes de que podamos siquiera repetir el comando <em>ps</em>, ya lo tenemos de nuevo en marcha:</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~$ ps faux <span class="p">|</span> grep database <span class="p">|</span> grep -v grep
gerard   <span class="m">22854</span>  <span class="m">0</span>.0  <span class="m">0</span>.0  <span class="m">13228</span>  <span class="m">2632</span> ?        Ss   <span class="m">15</span>:49   <span class="m">0</span>:00 /bin/bash /home/gerard/bin/tunnel_to.sh database
gerard   <span class="m">22855</span>  <span class="m">0</span>.0  <span class="m">0</span>.0  <span class="m">44428</span>  <span class="m">5200</span> ?        S    <span class="m">15</span>:49   <span class="m">0</span>:00  <span class="se">\_</span> ssh -L <span class="m">27017</span>:database:27017 jump@localhost -N
gerard@aldebaran:~$ 
</pre></div>


<p><strong>TRUCO</strong>: A pesar de que nuestro túnel pueda estar vivo, algunos servidores están configurados para cerrar conexiones que llevan mucho tiempo de inactividad. Podemos generar tráfico de <em>keepalive</em> para que esto no suceda, con una simple directiva <strong>SSH</strong> cliente. Por ejemplo, la podemos poner en la configuración local del usuario que levante los túneles.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~$ cat .ssh/config 
...
Host *
    ServerAliveInterval <span class="m">60</span>
...
gerard@aldebaran:~$ 
</pre></div>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Posts relacionados:</h4>
    <ul>
        <li><a href="https://www.linuxsysadmin.ml/2018/02/tuneles-ssh-con-reinicio-automatico-con-docker.html">Túneles SSH con reinicio automático con Docker</a></li>
        <li><a href="https://www.linuxsysadmin.ml/2017/06/exponiendo-puertos-tcp-a-traves-de-un-firewall-con-ngrok.html">Exponiendo puertos TCP a través de un firewall con ngrok</a></li>
        <li><a href="https://www.linuxsysadmin.ml/2016/10/creando-tuneles-con-ssh.html">Creando túneles con SSH</a></li>
    </ul>
</section>
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'linuxsysadmin-gmb'; // required: replace example with your forum shortname

                    var disqus_identifier = 'levantando-tuneles-ssh-con-systemd';
                var disqus_url = 'https://www.linuxsysadmin.ml/2016/11/levantando-tuneles-ssh-con-systemd.html';

            var disqus_config = function () {
                this.language = "es";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://github.com/sirtea"><i class="fa fa-github-square fa-lg"></i> GitHub</a></li>
              </ul>
            </li>


            <li class="list-group-item"><a href="https://www.linuxsysadmin.ml/categories.html"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categorías</span></h4></a>
                <ul class="list-group" id="categories">
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/desarrollo.html">
                            <i class="fa fa-folder-open fa-lg"></i> Desarrollo
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/miscelanea.html">
                            <i class="fa fa-folder-open fa-lg"></i> Miscelánea
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/operaciones.html">
                            <i class="fa fa-folder-open fa-lg"></i> Operaciones
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/seguridad.html">
                            <i class="fa fa-folder-open fa-lg"></i> Seguridad
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/sistemas.html">
                            <i class="fa fa-folder-open fa-lg"></i> Sistemas
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/virtualizacion.html">
                            <i class="fa fa-folder-open fa-lg"></i> Virtualización
                        </a>
                    </li>
                </ul>
            </li>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Sidebar linuxsysadmin -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6984858420847602"
     data-ad-slot="1931313371"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

            <li class="list-group-item"><a href="https://www.linuxsysadmin.ml/tags.html"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group list-inline tagcloud" id="tags">
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/2-way-ssl.html">
                            2 way ssl
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/ansible.html">
                            ansible
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/api.html">
                            api
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/apt.html">
                            apt
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/archlinux.html">
                            archlinux
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/autenticacion.html">
                            autenticación
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/autenticacion-basica.html">
                            autenticacion basica
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/balanceador.html">
                            balanceador
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/bash.html">
                            bash
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/basico.html">
                            básico
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/blog.html">
                            blog
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/bridge.html">
                            bridge
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/build.html">
                            build
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/cache.html">
                            cache
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/centos.html">
                            centos
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/certificado.html">
                            certificado
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/cluster.html">
                            cluster
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/consul.html">
                            consul
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/contenedor.html">
                            contenedor
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/css.html">
                            CSS
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/curl.html">
                            curl
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/debian.html">
                            debian
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/debootstrap.html">
                            debootstrap
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/dig.html">
                            dig
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/dns.html">
                            dns
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/dnsmasq.html">
                            dnsmasq
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/docker.html">
                            docker
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/docker-compose.html">
                            docker-compose
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/dockerfile.html">
                            Dockerfile
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/drill.html">
                            drill
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/escritorio.html">
                            escritorio
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/failover.html">
                            failover
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/firehol.html">
                            firehol
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/flask.html">
                            flask
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/framework.html">
                            framework
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/gateway.html">
                            gateway
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/ghost.html">
                            ghost
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/git.html">
                            git
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/haproxy.html">
                            haproxy
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/html.html">
                            html
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/https.html">
                            https
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/jaula.html">
                            jaula
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/jenkins.html">
                            jenkins
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/jessie.html">
                            jessie
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/json.html">
                            JSON
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/jsonschema.html">
                            jsonschema
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/keepalived.html">
                            keepalived
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/linux.html">
                            linux
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/logical-volume-manager.html">
                            logical volume manager
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/logs.html">
                            logs
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/logstash.html">
                            logstash
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/lvm.html">
                            lvm
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/lxc.html">
                            lxc
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/markdown.html">
                            markdown
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/master.html">
                            master
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/microframework.html">
                            microframework
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/migracion.html">
                            migración
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/mongodb.html">
                            mongodb
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/mount.html">
                            mount
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/nginx.html">
                            nginx
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/nmap.html">
                            nmap
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/passphrase.html">
                            passphrase
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/password.html">
                            password
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/php.html">
                            php
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/playbook.html">
                            playbook
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/proxy.html">
                            proxy
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/pypi.html">
                            PyPI
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/python.html">
                            python
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/redhat.html">
                            redhat
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/registro.html">
                            registro
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/remota.html">
                            remota
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/replica-set.html">
                            replica set
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/rest.html">
                            REST
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/rssh.html">
                            rssh
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/rsync.html">
                            rsync
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/s6.html">
                            s6
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/script.html">
                            script
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/service-discovery.html">
                            service discovery
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/sftp.html">
                            sftp
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/sharding.html">
                            sharding
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/slave.html">
                            slave
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/squashfs.html">
                            squashfs
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/ssh.html">
                            ssh
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/sshfs.html">
                            sshfs
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/ssl.html">
                            ssl
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/stretch.html">
                            stretch
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/swarm.html">
                            swarm
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/systemd.html">
                            systemd
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/tls.html">
                            tls
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/traefik.html">
                            traefik
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/tunel.html">
                            túnel
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/ubuntu.html">
                            ubuntu
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/unidad.html">
                            unidad
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/uwsgi.html">
                            uWSGI
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/variable.html">
                            variable
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/virtual-hosts.html">
                            virtual hosts
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/virtualenv.html">
                            virtualenv
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/volumenes.html">
                            volumenes
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/wheel.html">
                            wheel
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/xfce.html">
                            xfce
                        </a>
                    </li>
                </ul>
            </li>


    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Gerard
            &middot; Generado por <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Volver arriba</a></p></div>
      </div>
   </div>
</footer>
<script src="https://www.linuxsysadmin.ml/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://www.linuxsysadmin.ml/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://www.linuxsysadmin.ml/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'linuxsysadmin-gmb'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-68486572-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>