<!DOCTYPE html>
<html lang="es" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Microservicios con docker-compose - Linux Sysadmin</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="http://www.linuxsysadmin.ml/2016/10/microservicios-con-docker-compose.html">

        <meta name="author" content="Gerard" />
        <meta name="keywords" content="docker,docker-compose,microservicios" />
        <meta name="description" content="Docker es una gran herramienta para levantar contenedores aislados, pero en el mundo real nos encontramos con despliegues mas complejos, que requieren varias imágenes trabajando en conjunto. En este caso, levantar los contenedores puede ser una auténtica pesadilla. Para automatizar estos casos podemos utilizar un orquestador, como por ejemplo, docker-compose …" />

        <meta property="og:site_name" content="Linux Sysadmin" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Microservicios con docker-compose"/>
        <meta property="og:url" content="http://www.linuxsysadmin.ml/2016/10/microservicios-con-docker-compose.html"/>
        <meta property="og:description" content="Docker es una gran herramienta para levantar contenedores aislados, pero en el mundo real nos encontramos con despliegues mas complejos, que requieren varias imágenes trabajando en conjunto. En este caso, levantar los contenedores puede ser una auténtica pesadilla. Para automatizar estos casos podemos utilizar un orquestador, como por ejemplo, docker-compose …"/>
        <meta property="article:published_time" content="2016-10-24" />
            <meta property="article:section" content="Operaciones" />
            <meta property="article:tag" content="docker" />
            <meta property="article:tag" content="docker-compose" />
            <meta property="article:tag" content="microservicios" />
            <meta property="article:author" content="Gerard" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://www.linuxsysadmin.ml/theme/css/bootstrap.cosmo.min.css" type="text/css"/>
    <link href="http://www.linuxsysadmin.ml/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://www.linuxsysadmin.ml/theme/css/pygments/vim.css" rel="stylesheet">
    <link rel="stylesheet" href="http://www.linuxsysadmin.ml/theme/css/style.css" type="text/css"/>
        <link href="http://www.linuxsysadmin.ml/static/custom.css" rel="stylesheet">

        <link href="http://www.linuxsysadmin.ml/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Linux Sysadmin ATOM Feed"/>



        <link href="http://www.linuxsysadmin.ml/feeds/operaciones.atom.xml" type="application/atom+xml" rel="alternate"
              title="Linux Sysadmin Operaciones ATOM Feed"/>

    <!-- Begin Cookie Consent plugin by Silktide - http://silktide.com/cookieconsent -->
    <script type="text/javascript">
        window.cookieconsent_options = {"message":"De acuerdo a la ley vigente, estoy obligado a informarte de la obviedad de que este sitio utiliza cookies.","dismiss":"Acepto","learnMore":"Mas información","link":null,"theme":"dark-bottom"};
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js"></script>
    <!-- End Cookie Consent plugin -->

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://www.linuxsysadmin.ml/" class="navbar-brand">
Linux Sysadmin            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="http://www.linuxsysadmin.ml/about.html">
                             Sobre mí
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="http://www.linuxsysadmin.ml/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archivos</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
            <ol class="breadcrumb">
                <li><a href="http://www.linuxsysadmin.ml" title="Linux Sysadmin"><i class="fa fa-home fa-lg"></i></a></li>
                <li><a href="http://www.linuxsysadmin.ml/category/operaciones.html" title="Operaciones">Operaciones</a></li>
                <li class="active">Microservicios con docker-compose</li>
            </ol>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Banner linuxsysadmin -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6984858420847602"
     data-ad-slot="7977846974"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://www.linuxsysadmin.ml/2016/10/microservicios-con-docker-compose.html"
                       rel="bookmark"
                       title="Permalink to Microservicios con docker-compose">
                        Microservicios con docker-compose
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Fecha</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-10-24T08:00:00+02:00"> 2016-10-24</time>
    </span>


            <span class="label label-default">Autor</span>
            <a href="http://www.linuxsysadmin.ml/author/gerard.html"><i class="fa fa-user"></i> Gerard</a>

        <span class="label label-default">Tiempo de lectura</span> 9 minutos
        <span class="label label-default">Categoría</span>
        <a href="http://www.linuxsysadmin.ml/category/operaciones.html">Operaciones</a>


<span class="label label-default">Tags</span>
	<a href="http://www.linuxsysadmin.ml/tag/docker.html">docker</a>
        /
	<a href="http://www.linuxsysadmin.ml/tag/docker-compose.html">docker-compose</a>
        /
	<a href="http://www.linuxsysadmin.ml/tag/microservicios.html">microservicios</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p><strong>Docker</strong> es una gran herramienta para levantar contenedores aislados, pero en el mundo real nos encontramos con despliegues mas complejos, que requieren varias imágenes trabajando en conjunto. En este caso, levantar los contenedores puede ser una auténtica pesadilla. Para automatizar estos casos podemos utilizar un <em>orquestador</em>, como por ejemplo, <strong>docker-compose</strong>.</p>
<p>Para entender como funciona nos vamos a servir de un microservicio básico, que consiste en un <em>balanceador</em> público y varios <em>frontends</em>, que en este caso van a ser mínimos para no complicar innecesariamente este artículo.</p>
<p>Estos <em>frontends</em> van a responder a las peticiones con su <em>hostname</em>, solo para ver que el balanceador hace lo que debe. En un caso mas cercano a la realidad, las aplicaciones harían algo mas útil, posiblemente utilizando una base de datos.</p>
<h2>El balanceador</h2>
<p>Esta imagen se declara con un <em>Dockerfile</em> y sus ficheros auxiliares. Aunque en este caso se ha copiado un <a href="http://www.linuxsysadmin.ml/2016/09/imagenes-docker-reusables-mediante-configuraciones-dinamicas.html">artículo anterior</a>, se vuelven a exponer los ficheros por comodidad.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/composetest$ cat balancer/Dockerfile 
FROM alpine:3.4
RUN apk add --no-cache nginx <span class="o">&amp;&amp;</span> <span class="se">\</span>
    ln -s /dev/stdout /var/log/nginx/access.log <span class="o">&amp;&amp;</span> <span class="se">\</span>
    ln -s /dev/stderr /var/log/nginx/error.log <span class="o">&amp;&amp;</span> <span class="se">\</span>
    mkdir /run/nginx
COPY nginx.conf /etc/nginx/
COPY config.sh entrypoint.sh /
ENTRYPOINT <span class="o">[</span><span class="s2">&quot;/entrypoint.sh&quot;</span><span class="o">]</span>
gerard@sirius:~/docker/composetest$ cat balancer/nginx.conf 
worker_processes  <span class="m">1</span><span class="p">;</span>
events <span class="o">{</span>
    worker_connections  <span class="m">1024</span><span class="p">;</span>
<span class="o">}</span>
http <span class="o">{</span>
    include mime.types<span class="p">;</span>
    default_type application/octet-stream<span class="p">;</span>
    sendfile on<span class="p">;</span>
    keepalive_timeout <span class="m">65</span><span class="p">;</span>
    include conf.d/*<span class="p">;</span>
<span class="o">}</span>
gerard@sirius:~/docker/composetest$ cat balancer/config.sh 
<span class="c1">#!/bin/sh</span>

<span class="nb">echo</span> <span class="s2">&quot;upstream backend {&quot;</span>
<span class="k">for</span> BACKEND in <span class="k">$(</span><span class="nb">echo</span> <span class="si">${</span><span class="nv">BACKENDS</span><span class="si">}</span> <span class="p">|</span> sed <span class="s1">&#39;s/,/ /g&#39;</span><span class="k">)</span><span class="p">;</span> <span class="k">do</span>
<span class="nb">echo</span> <span class="s2">&quot;  server </span><span class="nv">$BACKEND</span><span class="s2">;&quot;</span>
<span class="k">done</span>
<span class="nb">echo</span> <span class="s2">&quot;&quot;&quot;\</span>
<span class="s2">}</span>

<span class="s2">server {</span>
<span class="s2">    listen 80;</span>
<span class="s2">    server_name _;</span>

<span class="s2">    location / {</span>
<span class="s2">        proxy_pass http://backend;</span>
<span class="s2">    }</span>
<span class="s2">}</span>
<span class="s2">&quot;&quot;&quot;</span>
gerard@sirius:~/docker/composetest$ cat balancer/entrypoint.sh 
<span class="c1">#!/bin/sh</span>

./config.sh &gt; /etc/nginx/conf.d/balancer
<span class="nb">exec</span> /usr/sbin/nginx -g <span class="s2">&quot;daemon off;&quot;</span>
gerard@sirius:~/docker/composetest$ 
</pre></div>


<h2>El frontend</h2>
<p>Vamos a poner una aplicación básica en <strong>python</strong>, que se va a servir con el servidor de aplicaciones <strong>uWSGI</strong> y solo va a informar de su <em>hostname</em>. Ahí pego su <em>Dockerfile</em> y los otros ficheros auxiliares.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/composetest$ cat frontend/Dockerfile 
FROM alpine:3.4
RUN apk add --no-cache uwsgi-python
COPY app.py app.ini /opt/app/
ENTRYPOINT <span class="o">[</span><span class="s2">&quot;uwsgi&quot;</span>, <span class="s2">&quot;--plugin=python&quot;</span>, <span class="s2">&quot;/opt/app/app.ini&quot;</span><span class="o">]</span>
gerard@sirius:~/docker/composetest$ cat frontend/app.py 
import os

def app<span class="o">(</span>environ, start_response<span class="o">)</span>:
    start_response<span class="o">(</span><span class="s1">&#39;200 OK&#39;</span>, <span class="o">[(</span><span class="s1">&#39;Content-Type&#39;</span>, <span class="s1">&#39;text/plain&#39;</span><span class="o">)])</span>
    yield os.uname<span class="o">()[</span><span class="m">1</span><span class="o">]</span> + <span class="s1">&#39;\n&#39;</span>
gerard@sirius:~/docker/composetest$ cat frontend/app.ini 
<span class="o">[</span>uwsgi<span class="o">]</span>
http-socket <span class="o">=</span> :8080
<span class="nv">chdir</span> <span class="o">=</span> /opt/app/
<span class="nv">module</span> <span class="o">=</span> app:app
gerard@sirius:~/docker/composetest$ 
</pre></div>


<h2>Declarando y levantando el servicio con docker-compose</h2>
<p>Vamos a crear un fichero para gobernar las acciones de <strong>docker-compose</strong>, siguiendo la <a href="https://docs.docker.com/compose/compose-file/">documentación</a>. La filosofía es muy simple; vamos a declarar como se construyen las imágenes, los puertos que publican y exponen, las variables de entorno necesarias y las dependencias entre las imágenes.</p>
<p>Empezamos con la imagen que no tiene dependencias, que es el <em>frontend</em>. Simplemente indicamos la carpeta que contiene el <em>Dockerfile</em> (desde la carpeta actual, por ejemplo), y vamos a indicar el puerto que expone, tal como indica la configuración de <strong>uWSGI</strong>.</p>
<p>El balanceador es un poco mas complejo; hay que indicar que no se puede levantar hasta que lo hagan los <em>frontends</em>, porque sino, el <strong>nginx</strong> no puede resolver sus nombres y acabaría inmediatamente. Hay que indicar que necesita acceso a los <em>frontends</em> para comunicar con su puerto 8080, y que vamos a publicar el puerto 80 en el contenedor como el 8888 en nuestra máquina física. El último paso es declarar las variables de entorno que se van a pasar al contenedor cuando este se ejecute; en este caso declaramos los servidores contra los que hay que hacer balanceo.</p>
<p><strong>IMPORTANTE</strong>: Cuando ejecutemos <strong>docker-compose</strong>, va a levantar una instancia de cada imagen, pudiendo escalar a <em>posteriori</em>. Como <strong>nginx</strong> no va  levantar si no conoce alguno de los <em>hostnames</em> contra los que balancea, vamos indicar solamente el primero.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/composetest$ cat docker-compose.yml 
version: <span class="s1">&#39;2&#39;</span>
services:
  frontend:
    build: frontend
    expose:
      - <span class="m">8080</span>
  balancer:
    build: balancer
    depends_on:
      - frontend
    links:
      - frontend
    ports:
      - <span class="s2">&quot;8888:80&quot;</span>
    environment:
      - <span class="nv">BACKENDS</span><span class="o">=</span>composetest_frontend_1:8080
gerard@sirius:~/docker/composetest$ 
</pre></div>


<p>Con todo delcarado, solo nos falta levantar el servicio. Esto va a reconstruir todas las imágenes que crea necesarias, ya levantar los contenedores que no lo estén.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/composetest$ docker-compose up -d
Creating network <span class="s2">&quot;composetest_default&quot;</span> with the default driver
Building frontend
Step <span class="m">1</span> : FROM alpine:3.4
 ---&gt; 4e38e38c8ce0
Step <span class="m">2</span> : RUN apk add --no-cache uwsgi-python
 ---&gt; Running in a57c36878d96
fetch http://dl-cdn.alpinelinux.org/alpine/v3.4/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.4/community/x86_64/APKINDEX.tar.gz
<span class="o">(</span><span class="m">1</span>/14<span class="o">)</span> Installing mailcap <span class="o">(</span><span class="m">2</span>.1.44-r0<span class="o">)</span>
<span class="o">(</span><span class="m">2</span>/14<span class="o">)</span> Installing pcre <span class="o">(</span><span class="m">8</span>.38-r1<span class="o">)</span>
<span class="o">(</span><span class="m">3</span>/14<span class="o">)</span> Installing uwsgi <span class="o">(</span><span class="m">2</span>.0.13-r0<span class="o">)</span>
<span class="o">(</span><span class="m">4</span>/14<span class="o">)</span> Installing libbz2 <span class="o">(</span><span class="m">1</span>.0.6-r4<span class="o">)</span>
<span class="o">(</span><span class="m">5</span>/14<span class="o">)</span> Installing expat <span class="o">(</span><span class="m">2</span>.1.1-r1<span class="o">)</span>
<span class="o">(</span><span class="m">6</span>/14<span class="o">)</span> Installing libffi <span class="o">(</span><span class="m">3</span>.2.1-r2<span class="o">)</span>
<span class="o">(</span><span class="m">7</span>/14<span class="o">)</span> Installing gdbm <span class="o">(</span><span class="m">1</span>.11-r1<span class="o">)</span>
<span class="o">(</span><span class="m">8</span>/14<span class="o">)</span> Installing ncurses-terminfo-base <span class="o">(</span><span class="m">6</span>.0-r7<span class="o">)</span>
<span class="o">(</span><span class="m">9</span>/14<span class="o">)</span> Installing ncurses-terminfo <span class="o">(</span><span class="m">6</span>.0-r7<span class="o">)</span>
<span class="o">(</span><span class="m">10</span>/14<span class="o">)</span> Installing ncurses-libs <span class="o">(</span><span class="m">6</span>.0-r7<span class="o">)</span>
<span class="o">(</span><span class="m">11</span>/14<span class="o">)</span> Installing readline <span class="o">(</span><span class="m">6</span>.3.008-r4<span class="o">)</span>
<span class="o">(</span><span class="m">12</span>/14<span class="o">)</span> Installing sqlite-libs <span class="o">(</span><span class="m">3</span>.13.0-r0<span class="o">)</span>
<span class="o">(</span><span class="m">13</span>/14<span class="o">)</span> Installing python <span class="o">(</span><span class="m">2</span>.7.12-r0<span class="o">)</span>
<span class="o">(</span><span class="m">14</span>/14<span class="o">)</span> Installing uwsgi-python <span class="o">(</span><span class="m">2</span>.0.13-r0<span class="o">)</span>
Executing busybox-1.24.2-r9.trigger
OK: <span class="m">53</span> MiB in <span class="m">25</span> packages
 ---&gt; 9749e8e317a7
Removing intermediate container a57c36878d96
Step <span class="m">3</span> : COPY app.py app.ini /opt/app/
 ---&gt; 98c310db1c73
Removing intermediate container 141de70e5976
Step <span class="m">4</span> : ENTRYPOINT uwsgi --plugin<span class="o">=</span>python /opt/app/app.ini
 ---&gt; Running in 7e5243bddee1
 ---&gt; 27da8b15e8b4
Removing intermediate container 7e5243bddee1
Successfully built 27da8b15e8b4
Creating composetest_frontend_1
Building balancer
Step <span class="m">1</span> : FROM alpine:3.4
 ---&gt; 4e38e38c8ce0
Step <span class="m">2</span> : RUN apk add --no-cache nginx <span class="o">&amp;&amp;</span>     ln -s /dev/stdout /var/log/nginx/access.log <span class="o">&amp;&amp;</span>     ln -s /dev/stderr /var/log/nginx/error.log <span class="o">&amp;&amp;</span>     mkdir /run/nginx
 ---&gt; Running in 5e7a6e24b1ea
fetch http://dl-cdn.alpinelinux.org/alpine/v3.4/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.4/community/x86_64/APKINDEX.tar.gz
<span class="o">(</span><span class="m">1</span>/3<span class="o">)</span> Installing nginx-common <span class="o">(</span><span class="m">1</span>.10.1-r1<span class="o">)</span>
Executing nginx-common-1.10.1-r1.pre-install
<span class="o">(</span><span class="m">2</span>/3<span class="o">)</span> Installing pcre <span class="o">(</span><span class="m">8</span>.38-r1<span class="o">)</span>
<span class="o">(</span><span class="m">3</span>/3<span class="o">)</span> Installing nginx <span class="o">(</span><span class="m">1</span>.10.1-r1<span class="o">)</span>
Executing busybox-1.24.2-r9.trigger
OK: <span class="m">6</span> MiB in <span class="m">14</span> packages
 ---&gt; b413d5ba8f3b
Removing intermediate container 5e7a6e24b1ea
Step <span class="m">3</span> : COPY nginx.conf /etc/nginx/
 ---&gt; e7db8e5794db
Removing intermediate container e33eef86f883
Step <span class="m">4</span> : COPY config.sh entrypoint.sh /
 ---&gt; e6fda1c75d22
Removing intermediate container 6cd5103894a9
Step <span class="m">5</span> : ENTRYPOINT /entrypoint.sh
 ---&gt; Running in cd26bbeaa306
 ---&gt; ff47baa82723
Removing intermediate container cd26bbeaa306
Successfully built ff47baa82723
Creating composetest_balancer_1
gerard@sirius:~/docker/composetest$ 
</pre></div>


<p>Podemos ver que ahora tenemos un solo contenedor por imagen declarada:</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/composetest$ docker-compose ps
         Name                       Command               State          Ports         
--------------------------------------------------------------------------------------
composetest_balancer_1   /entrypoint.sh                   Up      <span class="m">0</span>.0.0.0:8888-&gt;80/tcp 
composetest_frontend_1   uwsgi --plugin<span class="o">=</span>python /opt ...   Up      <span class="m">8080</span>/tcp             
gerard@sirius:~/docker/composetest$ 
</pre></div>


<p>Y si probamos nuestro servicio, vemos que funciona, aunque solo balancea contra un <em>frontend</em>, que es lo que indicamos.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/composetest$ curl http://localhost:8888/
9ae8f4367e2b
gerard@sirius:~/docker/composetest$ curl http://localhost:8888/
9ae8f4367e2b
gerard@sirius:~/docker/composetest$ curl http://localhost:8888/
9ae8f4367e2b
gerard@sirius:~/docker/composetest$ 
</pre></div>


<h2>Escalando nuestro servicio</h2>
<p>Escalar no es fácil; <strong>docker-compose</strong> solo nos permite modificar el número de contenedores de cada tipo que están corriendo en un momento dado. Para que estos nuevos contenedores reciban peticiones, hay que modificar la configuración del balanceador.</p>
<p>Empezaremos levantando otras 3 instancias de nuestro <em>frontend</em>; indicando que queremos 4, <strong>docker-compose</strong> va a levantar las 3 que faltan.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/composetest$ docker-compose scale <span class="nv">frontend</span><span class="o">=</span><span class="m">4</span>
Creating and starting <span class="m">2</span> ... <span class="k">done</span>
Creating and starting <span class="m">3</span> ... <span class="k">done</span>
Creating and starting <span class="m">4</span> ... <span class="k">done</span>
gerard@sirius:~/docker/composetest$ 
</pre></div>


<p>Para la parte del balanceador, no nos queda mas remedio que reconstruirlo. Por suerte, nuestra imagen se configura con variables de entorno, de forma que <strong>docker-compose</strong> solo va a levantar un contenedor nuevo, sin el proceso de reconstruir la imagen, que es innecesario.</p>
<p>Vamos a modificar el <em>docker-compose.yml</em>, para cambiar la variable de entorno <em>BACKENDS</em>. Como ya tenemos 4 instancias funcionando, no hay problema por parte del <strong>nginx</strong>.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/composetest$ cat docker-compose.yml 
version: <span class="s1">&#39;2&#39;</span>
services:
  frontend:
    build: frontend
    expose:
      - <span class="m">8080</span>
  balancer:
    build: balancer
    depends_on:
      - frontend
    links:
      - frontend
    ports:
      - <span class="s2">&quot;8888:80&quot;</span>
    environment:
      - <span class="nv">BACKENDS</span><span class="o">=</span>composetest_frontend_1:8080,composetest_frontend_2:8080,composetest_frontend_3:8080,composetest_frontend_4:8080
gerard@sirius:~/docker/composetest$ 
</pre></div>


<p>Levantamos el servicio de nuevo, y dejamos que <strong>docker-compose</strong> aplique su buen criterio. Vemos que no va a hacer nada con los <em>frontends</em> porque no han cambiado, y va a recrear el balanceador, con un tiempo mínimo.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/composetest$ docker-compose up -d
composetest_frontend_4 is up-to-date
composetest_frontend_2 is up-to-date
composetest_frontend_3 is up-to-date
composetest_frontend_1 is up-to-date
Recreating composetest_balancer_1
gerard@sirius:~/docker/composetest$ 
</pre></div>


<p>Vemos que efectivamente hay nuestros 5 contenedores en marcha:</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/composetest$ docker-compose ps
         Name                       Command               State          Ports         
--------------------------------------------------------------------------------------
composetest_balancer_1   /entrypoint.sh                   Up      <span class="m">0</span>.0.0.0:8888-&gt;80/tcp 
composetest_frontend_1   uwsgi --plugin<span class="o">=</span>python /opt ...   Up      <span class="m">8080</span>/tcp             
composetest_frontend_2   uwsgi --plugin<span class="o">=</span>python /opt ...   Up      <span class="m">8080</span>/tcp             
composetest_frontend_3   uwsgi --plugin<span class="o">=</span>python /opt ...   Up      <span class="m">8080</span>/tcp             
composetest_frontend_4   uwsgi --plugin<span class="o">=</span>python /opt ...   Up      <span class="m">8080</span>/tcp             
gerard@sirius:~/docker/composetest$ 
</pre></div>


<p>Y solo nos queda admirar como funcionan las peticiones balanceadas, siguiendo el algoritmo <em>round robin</em>.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/composetest$ curl http://localhost:8888/
9ae8f4367e2b
gerard@sirius:~/docker/composetest$ curl http://localhost:8888/
7490edd50676
gerard@sirius:~/docker/composetest$ curl http://localhost:8888/
63e9d7476267
gerard@sirius:~/docker/composetest$ curl http://localhost:8888/
4b6b11513400
gerard@sirius:~/docker/composetest$ curl http://localhost:8888/
9ae8f4367e2b
gerard@sirius:~/docker/composetest$ curl http://localhost:8888/
7490edd50676
gerard@sirius:~/docker/composetest$ curl http://localhost:8888/
63e9d7476267
gerard@sirius:~/docker/composetest$ curl http://localhost:8888/
4b6b11513400
gerard@sirius:~/docker/composetest$ 
</pre></div>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Posts relacionados:</h4>
    <ul>
        <li><a href="http://www.linuxsysadmin.ml/2017/03/un-entorno-web-estatico-con-nginx-rsync-y-docker.html">Un entorno web estático con nginx, rsync y docker</a></li>
        <li><a href="http://www.linuxsysadmin.ml/2017/07/montando-un-servidor-docker-con-debian-stretch.html">Montando un servidor docker con Debian Stretch</a></li>
        <li><a href="http://www.linuxsysadmin.ml/2017/02/sincronizando-ficheros-con-owncloud.html">Sincronizando ficheros con ownCloud</a></li>
    </ul>
</section>
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'linuxsysadmin-gmb'; // required: replace example with your forum shortname

                    var disqus_identifier = 'microservicios-con-docker-compose';
                var disqus_url = 'http://www.linuxsysadmin.ml/2016/10/microservicios-con-docker-compose.html';

            var disqus_config = function () {
                this.language = "es";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://github.com/sirtea"><i class="fa fa-github-square fa-lg"></i> GitHub</a></li>
              </ul>
            </li>


            <li class="list-group-item"><a href="http://www.linuxsysadmin.ml/categories.html"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categorías</span></h4></a>
                <ul class="list-group" id="categories">
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.ml/category/desarrollo.html">
                            <i class="fa fa-folder-open fa-lg"></i> Desarrollo
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.ml/category/miscelanea.html">
                            <i class="fa fa-folder-open fa-lg"></i> Miscelánea
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.ml/category/operaciones.html">
                            <i class="fa fa-folder-open fa-lg"></i> Operaciones
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.ml/category/seguridad.html">
                            <i class="fa fa-folder-open fa-lg"></i> Seguridad
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.ml/category/sistemas.html">
                            <i class="fa fa-folder-open fa-lg"></i> Sistemas
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.ml/category/virtualizacion.html">
                            <i class="fa fa-folder-open fa-lg"></i> Virtualización
                        </a>
                    </li>
                </ul>
            </li>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Sidebar linuxsysadmin -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6984858420847602"
     data-ad-slot="1931313371"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

            <li class="list-group-item"><a href="http://www.linuxsysadmin.ml/tags.html"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group list-inline tagcloud" id="tags">
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/2-way-ssl.html">
                            2 way ssl
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/ansible.html">
                            ansible
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/archlinux.html">
                            archlinux
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/auditoria.html">
                            auditoría
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/autenticacion.html">
                            autenticación
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/balanceador.html">
                            balanceador
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/blog.html">
                            blog
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/blueprints.html">
                            blueprints
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/bridge.html">
                            bridge
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/buffering.html">
                            buffering
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/build.html">
                            build
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/cache.html">
                            cache
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/capabilities.html">
                            capabilities
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/centos.html">
                            centos
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/certificado.html">
                            certificado
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/cluster.html">
                            cluster
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/curl.html">
                            curl
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.ml/tag/debian.html">
                            debian
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/debootstrap.html">
                            debootstrap
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/desviacion-estandar.html">
                            desviación estándar
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/dhcp.html">
                            dhcp
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/dns.html">
                            dns
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/dnsmasq.html">
                            dnsmasq
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.ml/tag/docker.html">
                            docker
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/docker-compose.html">
                            docker-compose
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/dockerfile.html">
                            Dockerfile
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/escalable.html">
                            escalable
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/escritorio.html">
                            escritorio
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/failover.html">
                            failover
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/falcon.html">
                            falcon
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/firehol.html">
                            firehol
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/flask.html">
                            flask
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/framework.html">
                            framework
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/genisoimage.html">
                            genisoimage
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/ghost.html">
                            ghost
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/git.html">
                            git
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/gz.html">
                            gz
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/html.html">
                            html
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/https.html">
                            https
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/inventario.html">
                            inventario
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/jaula.html">
                            jaula
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.ml/tag/jessie.html">
                            jessie
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/lamp.html">
                            LAMP
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/ldd.html">
                            ldd
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.ml/tag/linux.html">
                            linux
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/livecd.html">
                            livecd
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/logical-volume-manager.html">
                            logical volume manager
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/logs.html">
                            logs
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/logstash.html">
                            logstash
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/lvm.html">
                            lvm
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/lxc.html">
                            lxc
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/markdown.html">
                            markdown
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/memory-manager.html">
                            memory manager
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/microframework.html">
                            microframework
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/mongodb.html">
                            mongodb
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/mongoengine.html">
                            mongoengine
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/mount.html">
                            mount
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/nginx.html">
                            nginx
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/nmap.html">
                            nmap
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/passphrase.html">
                            passphrase
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/password.html">
                            password
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/pentest.html">
                            pentest
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/php.html">
                            php
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/playbook.html">
                            playbook
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/point-in-time.html">
                            point-in-time
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/proxy.html">
                            proxy
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/proxy-http.html">
                            proxy http
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/pypi.html">
                            PyPI
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.ml/tag/python.html">
                            python
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/raid.html">
                            raid
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/redhat.html">
                            redhat
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/redirecciones.html">
                            redirecciones
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/replica-set.html">
                            replica set
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/rest.html">
                            REST
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/rol.html">
                            rol
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/rssh.html">
                            rssh
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/rsync.html">
                            rsync
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/runit.html">
                            runit
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/script.html">
                            script
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/seguridad.html">
                            seguridad
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/squashfs.html">
                            squashfs
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.ml/tag/ssh.html">
                            ssh
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/ssl.html">
                            ssl
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/subprocess.html">
                            subprocess
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/swarm.html">
                            swarm
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/sysbench.html">
                            sysbench
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/systemd.html">
                            systemd
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/telegraf.html">
                            telegraf
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/telegram.html">
                            telegram
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/terminal.html">
                            terminal
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/tmpfs.html">
                            tmpfs
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/toolbox.html">
                            toolbox
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/tunel.html">
                            túnel
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/ubuntu.html">
                            ubuntu
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/uwsgi.html">
                            uWSGI
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/virtual-hosts.html">
                            virtual hosts
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/virtualenv.html">
                            virtualenv
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/volumenes.html">
                            volumenes
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/wheel.html">
                            wheel
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/xfce.html">
                            xfce
                        </a>
                    </li>
                </ul>
            </li>


    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2017 Gerard
            &middot; Generado por <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Volver arriba</a></p></div>
      </div>
   </div>
</footer>
<script src="http://www.linuxsysadmin.ml/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://www.linuxsysadmin.ml/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://www.linuxsysadmin.ml/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'linuxsysadmin-gmb'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-68486572-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>