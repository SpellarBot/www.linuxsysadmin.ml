<!DOCTYPE html>
<html lang="es" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Separando el build y el runtime con contenedores Docker - Linux Sysadmin</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://www.linuxsysadmin.ml/2016/10/separando-el-build-y-el-runtime-con-contenedores-docker.html">

        <meta name="author" content="Gerard" />
        <meta name="keywords" content="docker,python,build,runtime,release" />
        <meta name="description" content="Cuando montamos un contenedor Docker para servir una aplicación cualquiera, solemos poner un montón de dependencias necesarias solamente para compilar el paquete o para empaquetar sus librerías. Esto supone un gasto innecesario en espacio y en tiempo de ejecución; usando contenedores desechables podemos agilizar este proceso de forma altamente considerable …" />

        <meta property="og:site_name" content="Linux Sysadmin" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Separando el build y el runtime con contenedores Docker"/>
        <meta property="og:url" content="https://www.linuxsysadmin.ml/2016/10/separando-el-build-y-el-runtime-con-contenedores-docker.html"/>
        <meta property="og:description" content="Cuando montamos un contenedor Docker para servir una aplicación cualquiera, solemos poner un montón de dependencias necesarias solamente para compilar el paquete o para empaquetar sus librerías. Esto supone un gasto innecesario en espacio y en tiempo de ejecución; usando contenedores desechables podemos agilizar este proceso de forma altamente considerable …"/>
        <meta property="article:published_time" content="2016-10-10" />
            <meta property="article:section" content="Operaciones" />
            <meta property="article:tag" content="docker" />
            <meta property="article:tag" content="python" />
            <meta property="article:tag" content="build" />
            <meta property="article:tag" content="runtime" />
            <meta property="article:tag" content="release" />
            <meta property="article:author" content="Gerard" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://www.linuxsysadmin.ml/theme/css/bootstrap.cosmo.min.css" type="text/css"/>
    <link href="https://www.linuxsysadmin.ml/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://www.linuxsysadmin.ml/theme/css/pygments/vim.css" rel="stylesheet">
    <link rel="stylesheet" href="https://www.linuxsysadmin.ml/theme/css/style.css" type="text/css"/>
        <link href="https://www.linuxsysadmin.ml/static/custom.css" rel="stylesheet">

        <link href="https://www.linuxsysadmin.ml/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Linux Sysadmin ATOM Feed"/>



        <link href="https://www.linuxsysadmin.ml/feeds/operaciones.atom.xml" type="application/atom+xml" rel="alternate"
              title="Linux Sysadmin Operaciones ATOM Feed"/>

    <!-- Begin Cookie Consent plugin by Silktide - http://silktide.com/cookieconsent -->
    <script type="text/javascript">
        window.cookieconsent_options = {"message":"De acuerdo a la ley vigente, estoy obligado a informarte de la obviedad de que este sitio utiliza cookies.","dismiss":"Acepto","learnMore":"Mas información","link":null,"theme":"dark-bottom"};
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js"></script>
    <!-- End Cookie Consent plugin -->

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://www.linuxsysadmin.ml/" class="navbar-brand">
Linux Sysadmin            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://www.linuxsysadmin.ml/about.html">
                             Sobre mí
                          </a></li>
                         <li><a href="https://www.linuxsysadmin.ml/curriculum.html">
                             Curriculum Vitae
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://www.linuxsysadmin.ml/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archivos</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
            <ol class="breadcrumb">
                <li><a href="https://www.linuxsysadmin.ml" title="Linux Sysadmin"><i class="fa fa-home fa-lg"></i></a></li>
                <li><a href="https://www.linuxsysadmin.ml/category/operaciones.html" title="Operaciones">Operaciones</a></li>
                <li class="active">Separando el build y el runtime con contenedores Docker</li>
            </ol>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Banner linuxsysadmin -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6984858420847602"
     data-ad-slot="7977846974"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://www.linuxsysadmin.ml/2016/10/separando-el-build-y-el-runtime-con-contenedores-docker.html"
                       rel="bookmark"
                       title="Permalink to Separando el build y el runtime con contenedores Docker">
                        Separando el build y el runtime con contenedores Docker
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Fecha</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2016-10-10T08:00:00+02:00"> 2016-10-10</time>
    </span>


            <span class="label label-default">Autor</span>
            <a href="https://www.linuxsysadmin.ml/author/gerard.html"><i class="fa fa-user"></i> Gerard</a>

        <span class="label label-default">Tiempo de lectura</span> 10 minutos
        <span class="label label-default">Categoría</span>
        <a href="https://www.linuxsysadmin.ml/category/operaciones.html">Operaciones</a>


<span class="label label-default">Tags</span>
	<a href="https://www.linuxsysadmin.ml/tag/docker.html">docker</a>
        /
	<a href="https://www.linuxsysadmin.ml/tag/python.html">python</a>
        /
	<a href="https://www.linuxsysadmin.ml/tag/build.html">build</a>
        /
	<a href="https://www.linuxsysadmin.ml/tag/runtime.html">runtime</a>
        /
	<a href="https://www.linuxsysadmin.ml/tag/release.html">release</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Cuando montamos un contenedor <strong>Docker</strong> para servir una aplicación cualquiera, solemos poner un montón de dependencias necesarias solamente para compilar el paquete o para empaquetar sus librerías. Esto supone un gasto innecesario en espacio y en tiempo de ejecución; usando contenedores desechables podemos agilizar este proceso de forma altamente considerable.</p>
<p>Para ello vamos a partir de una aplicación simplista hecha con <strong>python</strong> que podemos encontrar en <a href="https://github.com/Sirtea/autobuilder">https://github.com/Sirtea/autobuilder</a>. La idea es que vamos a preparar las dependencias en un contenedor, para luego sacar lo justo y necesario para poner en un contenedor que disponga solamente de lo justo para el <em>runtime</em>.</p>
<p>Para simplificar mas todavía, vamos a separar el código base del contenedor, de forma que este pueda ir cambiando modificando solamente un parámetro dado. Vamos a delegar la descarga y compilación del código base a un <em>script</em>, que no cambie y que permita trabajar con las diferentes versiones de nuestra aplicación.</p>
<p>Para que todo esto funcione, necesitamos seguir una cantidad mínima de reglas, que van a poderse cumplir independientemente del proyecto o del <em>framework</em> usado.</p>
<ul>
<li>En la base del repositorio hay un <em>requirements.txt</em> que nos va a indicar las librerías necesarias.</li>
<li>La aplicación quedará alojada en una carpeta <em>app</em>, el módulo con la aplicación se va a llamar <em>app</em> (módulo o <em>package</em>) y el <em>callable</em> también se va a llamar <em>app</em>.</li>
<li>El <em>virtualenv</em> se va aconstruir en <em>/app/env</em>, para su uso futuro, en tiempo de <em>runtime</em>.</li>
</ul>
<p>Vamos a empezar construyendo una carpeta contenedora de las dos imágenes que vamos a usar, separadas a su vez por otro nivel de carpetas.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/autobuilder$ tree
.
├── builder
│   ├── build.sh
│   └── Dockerfile
└── runner
    ├── app.ini
    └── Dockerfile

<span class="m">2</span> directories, <span class="m">4</span> files
gerard@sirius:~/docker/autobuilder$ 
</pre></div>


<h2>La imagen de build</h2>
<p>La filosofía es muy simple: crearemos una imagen que tenga todas las dependencias necesarias para la construcción de la aplicación (en nuestro caso el <em>virtualenv</em>), y vamos a poner un <em>script</em> llamado <em>build.sh</em> que se va a encargar de clonar un repositorio en <a href="https://github.com/">GitHub</a> y va a construir una refererencia tambien indicada mediante variables de entorno.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/autobuilder$ cat builder/Dockerfile 
FROM alpine:3.4
RUN apk add --no-cache py-virtualenv git gcc musl-dev python-dev
COPY build.sh /
ENTRYPOINT <span class="o">[</span><span class="s2">&quot;sh&quot;</span>, <span class="s2">&quot;build.sh&quot;</span><span class="o">]</span>
gerard@sirius:~/docker/autobuilder$ 
</pre></div>


<p>El <em>script</em> de <em>build</em> va a depender bastante de como se prepara nuestra aplicación. En este caso va a clonar el repositorio en una carpeta <em>/build</em>, y va a copiar la referencia solicitada en una carpeta <em>/app</em>, que luego va a ser acompañada con un <em>virtualenv</em>. Puesto que el <em>virtualenv</em> es dependiente de la localización en el servidor, vamos a usar también <em>/app</em> en la máquina de <em>runtime</em>. En este paso es cuando hace falta usar la convención del fichero <em>requirements.txt</em>.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/autobuilder$ cat builder/build.sh 
<span class="c1">#!/bin/sh</span>

mkdir /app
git clone <span class="si">${</span><span class="nv">REPO</span><span class="si">}</span> /build
<span class="nb">cd</span> /build
git archive <span class="si">${</span><span class="nv">REF</span><span class="si">}</span> <span class="p">|</span> tar xf - -C /app
virtualenv /app/env
/app/env/bin/pip install -r /app/requirements.txt
tar czf /shared/app.tar.gz -C / app
gerard@sirius:~/docker/autobuilder$ 
</pre></div>


<p>La idea es que el producto acabado quede comprimido en la carpeta <em>/shared</em>. Personalmente he utilizado un fichero <em>.tar.gz</em>, pero se podría haber utilizado ficheros <em>.deb</em>, <em>.rpm</em> o lo que hiciera falta.</p>
<p>Falta construir la imagen a partir de los ficheros dados:</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/autobuilder/builder$ docker build -t builder .
Sending build context to Docker daemon <span class="m">3</span>.072 kB
Step <span class="m">1</span> : FROM alpine:3.4
<span class="m">3</span>.4: Pulling from library/alpine
Digest: sha256:3dcdb92d7432d56604d4545cbd324b14e647b313626d99b889d0626de158f73a
Status: Downloaded newer image <span class="k">for</span> alpine:3.4
 ---&gt; 4e38e38c8ce0
Step <span class="m">2</span> : RUN apk add --no-cache py-virtualenv git gcc musl-dev python-dev
 ---&gt; Running in 36ab40f2fbc6
fetch http://dl-cdn.alpinelinux.org/alpine/v3.4/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.4/community/x86_64/APKINDEX.tar.gz
<span class="o">(</span><span class="m">1</span>/35<span class="o">)</span> Upgrading musl <span class="o">(</span><span class="m">1</span>.1.14-r10 -&gt; <span class="m">1</span>.1.14-r11<span class="o">)</span>
<span class="o">(</span><span class="m">2</span>/35<span class="o">)</span> Installing binutils-libs <span class="o">(</span><span class="m">2</span>.26-r0<span class="o">)</span>
<span class="o">(</span><span class="m">3</span>/35<span class="o">)</span> Installing binutils <span class="o">(</span><span class="m">2</span>.26-r0<span class="o">)</span>
<span class="o">(</span><span class="m">4</span>/35<span class="o">)</span> Installing gmp <span class="o">(</span><span class="m">6</span>.1.0-r0<span class="o">)</span>
<span class="o">(</span><span class="m">5</span>/35<span class="o">)</span> Installing isl <span class="o">(</span><span class="m">0</span>.14.1-r0<span class="o">)</span>
<span class="o">(</span><span class="m">6</span>/35<span class="o">)</span> Installing libgomp <span class="o">(</span><span class="m">5</span>.3.0-r0<span class="o">)</span>
<span class="o">(</span><span class="m">7</span>/35<span class="o">)</span> Installing libatomic <span class="o">(</span><span class="m">5</span>.3.0-r0<span class="o">)</span>
<span class="o">(</span><span class="m">8</span>/35<span class="o">)</span> Installing libgcc <span class="o">(</span><span class="m">5</span>.3.0-r0<span class="o">)</span>
<span class="o">(</span><span class="m">9</span>/35<span class="o">)</span> Installing pkgconf <span class="o">(</span><span class="m">0</span>.9.12-r0<span class="o">)</span>
<span class="o">(</span><span class="m">10</span>/35<span class="o">)</span> Installing pkgconfig <span class="o">(</span><span class="m">0</span>.25-r1<span class="o">)</span>
<span class="o">(</span><span class="m">11</span>/35<span class="o">)</span> Installing mpfr3 <span class="o">(</span><span class="m">3</span>.1.2-r0<span class="o">)</span>
<span class="o">(</span><span class="m">12</span>/35<span class="o">)</span> Installing mpc1 <span class="o">(</span><span class="m">1</span>.0.3-r0<span class="o">)</span>
<span class="o">(</span><span class="m">13</span>/35<span class="o">)</span> Installing libstdc++ <span class="o">(</span><span class="m">5</span>.3.0-r0<span class="o">)</span>
<span class="o">(</span><span class="m">14</span>/35<span class="o">)</span> Installing gcc <span class="o">(</span><span class="m">5</span>.3.0-r0<span class="o">)</span>
<span class="o">(</span><span class="m">15</span>/35<span class="o">)</span> Installing ca-certificates <span class="o">(</span><span class="m">20160104</span>-r4<span class="o">)</span>
<span class="o">(</span><span class="m">16</span>/35<span class="o">)</span> Installing libssh2 <span class="o">(</span><span class="m">1</span>.7.0-r0<span class="o">)</span>
<span class="o">(</span><span class="m">17</span>/35<span class="o">)</span> Installing libcurl <span class="o">(</span><span class="m">7</span>.50.1-r0<span class="o">)</span>
<span class="o">(</span><span class="m">18</span>/35<span class="o">)</span> Installing expat <span class="o">(</span><span class="m">2</span>.1.1-r1<span class="o">)</span>
<span class="o">(</span><span class="m">19</span>/35<span class="o">)</span> Installing pcre <span class="o">(</span><span class="m">8</span>.38-r1<span class="o">)</span>
<span class="o">(</span><span class="m">20</span>/35<span class="o">)</span> Installing git <span class="o">(</span><span class="m">2</span>.8.3-r0<span class="o">)</span>
<span class="o">(</span><span class="m">21</span>/35<span class="o">)</span> Upgrading musl-utils <span class="o">(</span><span class="m">1</span>.1.14-r10 -&gt; <span class="m">1</span>.1.14-r11<span class="o">)</span>
<span class="o">(</span><span class="m">22</span>/35<span class="o">)</span> Installing musl-dev <span class="o">(</span><span class="m">1</span>.1.14-r11<span class="o">)</span>
<span class="o">(</span><span class="m">23</span>/35<span class="o">)</span> Installing libbz2 <span class="o">(</span><span class="m">1</span>.0.6-r4<span class="o">)</span>
<span class="o">(</span><span class="m">24</span>/35<span class="o">)</span> Installing libffi <span class="o">(</span><span class="m">3</span>.2.1-r2<span class="o">)</span>
<span class="o">(</span><span class="m">25</span>/35<span class="o">)</span> Installing gdbm <span class="o">(</span><span class="m">1</span>.11-r1<span class="o">)</span>
<span class="o">(</span><span class="m">26</span>/35<span class="o">)</span> Installing ncurses-terminfo-base <span class="o">(</span><span class="m">6</span>.0-r7<span class="o">)</span>
<span class="o">(</span><span class="m">27</span>/35<span class="o">)</span> Installing ncurses-terminfo <span class="o">(</span><span class="m">6</span>.0-r7<span class="o">)</span>
<span class="o">(</span><span class="m">28</span>/35<span class="o">)</span> Installing ncurses-libs <span class="o">(</span><span class="m">6</span>.0-r7<span class="o">)</span>
<span class="o">(</span><span class="m">29</span>/35<span class="o">)</span> Installing readline <span class="o">(</span><span class="m">6</span>.3.008-r4<span class="o">)</span>
<span class="o">(</span><span class="m">30</span>/35<span class="o">)</span> Installing sqlite-libs <span class="o">(</span><span class="m">3</span>.13.0-r0<span class="o">)</span>
<span class="o">(</span><span class="m">31</span>/35<span class="o">)</span> Installing python <span class="o">(</span><span class="m">2</span>.7.12-r0<span class="o">)</span>
<span class="o">(</span><span class="m">32</span>/35<span class="o">)</span> Installing py-setuptools <span class="o">(</span><span class="m">20</span>.8.0-r0<span class="o">)</span>
<span class="o">(</span><span class="m">33</span>/35<span class="o">)</span> Installing py-pip <span class="o">(</span><span class="m">8</span>.1.2-r0<span class="o">)</span>
<span class="o">(</span><span class="m">34</span>/35<span class="o">)</span> Installing py-virtualenv <span class="o">(</span><span class="m">15</span>.0.1-r0<span class="o">)</span>
<span class="o">(</span><span class="m">35</span>/35<span class="o">)</span> Installing python-dev <span class="o">(</span><span class="m">2</span>.7.12-r0<span class="o">)</span>
Executing busybox-1.24.2-r9.trigger
Executing ca-certificates-20160104-r4.trigger
OK: <span class="m">169</span> MiB in <span class="m">44</span> packages
 ---&gt; 86bd30dae926
Removing intermediate container 36ab40f2fbc6
Step <span class="m">3</span> : COPY build.sh /
 ---&gt; bb87e7021b1f
Removing intermediate container d1c160839571
Step <span class="m">4</span> : ENTRYPOINT sh build.sh
 ---&gt; Running in ec43f4786949
 ---&gt; 9887ce973fe2
Removing intermediate container ec43f4786949
Successfully built 9887ce973fe2
gerard@sirius:~/docker/autobuilder/builder$ 
</pre></div>


<p>Esta imagen no se va a reconstruir -en principio- nunca. Las diferentes ejecuciones van a producir diferentes productos.</p>
<h2>La imagen de runtime</h2>
<p>Esta imagen es todavía mas fácil; se trata de un servidor de aplicaciones estándar que va a servir la aplicación siguiendo las reglas descritas mas arriba.</p>
<p>Vamos a asumir que tenemos el <em>bundle</em> construido y llamado <em>app.tar.gz</em>, así que solo faltaría descomprimirlo para que quede todo en <em>/app</em>.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/autobuilder/runner$ cat Dockerfile 
FROM alpine:3.4
RUN apk add --no-cache uwsgi-python
ADD app.tar.gz /
COPY app.ini /app/
ENTRYPOINT <span class="o">[</span><span class="s2">&quot;uwsgi&quot;</span>, <span class="s2">&quot;--ini&quot;</span>, <span class="s2">&quot;/app/app.ini&quot;</span><span class="o">]</span>
gerard@sirius:~/docker/autobuilder/runner$ 
</pre></div>


<p>El fichero que va a servir la aplicación depende de cada servidor de aplicaciones, y de momento, nos vale un sencillo. En este punto se vuelve especialmente importante respetar las convenciones del <em>virtualenv</em> y de la localización de la aplicación.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/autobuilder/runner$ cat app.ini 
<span class="o">[</span>uwsgi<span class="o">]</span>
http-socket <span class="o">=</span> :8080
<span class="nv">plugin</span> <span class="o">=</span> python
<span class="nv">chdir</span> <span class="o">=</span> /app/app/
<span class="nv">virtualenv</span> <span class="o">=</span> /app/env/
<span class="nv">module</span> <span class="o">=</span> app:app
gerard@sirius:~/docker/autobuilder/runner$ 
</pre></div>


<h2>La hora de la release</h2>
<p>Ha llegado el momento de hacer una <em>release</em>; así que vamos a hacer el <em>bundle</em> y la imagen de servicio, para luego poder servirlo. Este paso se va a repetir muy a menudo, dependiendo de la política de <em>releases</em> de vuestra compañía. Para obtener el <em>bundle</em>, necesitamos compilar la referencia del repositorio.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/autobuilder/runner$ docker run -ti --rm -e <span class="s2">&quot;REPO=https://github.com/Sirtea/autobuilder.git&quot;</span> -e <span class="s2">&quot;REF=v1.0.0&quot;</span> -v /home/gerard/docker/autobuilder/runner/:/shared/ builder
Cloning into <span class="s1">&#39;/build&#39;</span>...
remote: Counting objects: <span class="m">10</span>, <span class="k">done</span>.
remote: Compressing objects: <span class="m">100</span>% <span class="o">(</span><span class="m">9</span>/9<span class="o">)</span>, <span class="k">done</span>.
remote: Total <span class="m">10</span> <span class="o">(</span>delta <span class="m">0</span><span class="o">)</span>, reused <span class="m">10</span> <span class="o">(</span>delta <span class="m">0</span><span class="o">)</span>, pack-reused <span class="m">0</span>
Unpacking objects: <span class="m">100</span>% <span class="o">(</span><span class="m">10</span>/10<span class="o">)</span>, <span class="k">done</span>.
Checking connectivity... <span class="k">done</span>.
New python executable in /app/env/bin/python
Installing setuptools, pip, wheel...done.
Collecting <span class="nv">click</span><span class="o">==</span><span class="m">6</span>.6 <span class="o">(</span>from -r /app/requirements.txt <span class="o">(</span>line <span class="m">1</span><span class="o">))</span>
  Downloading click-6.6.tar.gz <span class="o">(</span>283kB<span class="o">)</span>
    <span class="m">100</span>% <span class="p">|</span>████████████████████████████████<span class="p">|</span> 286kB 536kB/s 
Collecting <span class="nv">Flask</span><span class="o">==</span><span class="m">0</span>.11.1 <span class="o">(</span>from -r /app/requirements.txt <span class="o">(</span>line <span class="m">2</span><span class="o">))</span>
  Downloading Flask-0.11.1-py2.py3-none-any.whl <span class="o">(</span>80kB<span class="o">)</span>
    <span class="m">100</span>% <span class="p">|</span>████████████████████████████████<span class="p">|</span> 81kB 809kB/s 
Collecting <span class="nv">itsdangerous</span><span class="o">==</span><span class="m">0</span>.24 <span class="o">(</span>from -r /app/requirements.txt <span class="o">(</span>line <span class="m">3</span><span class="o">))</span>
  Downloading itsdangerous-0.24.tar.gz <span class="o">(</span>46kB<span class="o">)</span>
    <span class="m">100</span>% <span class="p">|</span>████████████████████████████████<span class="p">|</span> 51kB 724kB/s 
Collecting <span class="nv">Jinja2</span><span class="o">==</span><span class="m">2</span>.8 <span class="o">(</span>from -r /app/requirements.txt <span class="o">(</span>line <span class="m">4</span><span class="o">))</span>
  Downloading Jinja2-2.8-py2.py3-none-any.whl <span class="o">(</span>263kB<span class="o">)</span>
    <span class="m">100</span>% <span class="p">|</span>████████████████████████████████<span class="p">|</span> 266kB 861kB/s 
Collecting <span class="nv">MarkupSafe</span><span class="o">==</span><span class="m">0</span>.23 <span class="o">(</span>from -r /app/requirements.txt <span class="o">(</span>line <span class="m">5</span><span class="o">))</span>
  Downloading MarkupSafe-0.23.tar.gz
Collecting <span class="nv">mongoengine</span><span class="o">==</span><span class="m">0</span>.10.6 <span class="o">(</span>from -r /app/requirements.txt <span class="o">(</span>line <span class="m">6</span><span class="o">))</span>
  Downloading mongoengine-0.10.6.tar.gz <span class="o">(</span>346kB<span class="o">)</span>
    <span class="m">100</span>% <span class="p">|</span>████████████████████████████████<span class="p">|</span> 348kB 803kB/s 
Collecting <span class="nv">pymongo</span><span class="o">==</span><span class="m">3</span>.3.0 <span class="o">(</span>from -r /app/requirements.txt <span class="o">(</span>line <span class="m">7</span><span class="o">))</span>
  Downloading pymongo-3.3.0.tar.gz <span class="o">(</span>494kB<span class="o">)</span>
    <span class="m">100</span>% <span class="p">|</span>████████████████████████████████<span class="p">|</span> 501kB 753kB/s 
Collecting <span class="nv">Werkzeug</span><span class="o">==</span><span class="m">0</span>.11.10 <span class="o">(</span>from -r /app/requirements.txt <span class="o">(</span>line <span class="m">8</span><span class="o">))</span>
  Downloading Werkzeug-0.11.10-py2.py3-none-any.whl <span class="o">(</span>306kB<span class="o">)</span>
    <span class="m">100</span>% <span class="p">|</span>████████████████████████████████<span class="p">|</span> 307kB <span class="m">1</span>.1MB/s 
Building wheels <span class="k">for</span> collected packages: click, itsdangerous, MarkupSafe, mongoengine, pymongo
  Running setup.py bdist_wheel <span class="k">for</span> click ... <span class="k">done</span>
  Stored in directory: /root/.cache/pip/wheels/b0/6d/8c/cf5ca1146e48bc7914748bfb1dbf3a40a440b8b4f4f0d952dd
  Running setup.py bdist_wheel <span class="k">for</span> itsdangerous ... <span class="k">done</span>
  Stored in directory: /root/.cache/pip/wheels/fc/a8/66/24d655233c757e178d45dea2de22a04c6d92766abfb741129a
  Running setup.py bdist_wheel <span class="k">for</span> MarkupSafe ... <span class="k">done</span>
  Stored in directory: /root/.cache/pip/wheels/a3/fa/dc/0198eed9ad95489b8a4f45d14dd5d2aee3f8984e46862c5748
  Running setup.py bdist_wheel <span class="k">for</span> mongoengine ... <span class="k">done</span>
  Stored in directory: /root/.cache/pip/wheels/ae/6d/cb/4573bb9aceaed483557761df59571c6a3f108e87a80d2ba03a
  Running setup.py bdist_wheel <span class="k">for</span> pymongo ... <span class="k">done</span>
  Stored in directory: /root/.cache/pip/wheels/bf/f7/14/6ed22fbc276fc2d9fa7cdb2235dea8d5f154d711dfdf4bdebe
Successfully built click itsdangerous MarkupSafe mongoengine pymongo
Installing collected packages: click, MarkupSafe, Jinja2, Werkzeug, itsdangerous, Flask, pymongo, mongoengine
Successfully installed Flask-0.11.1 Jinja2-2.8 MarkupSafe-0.23 Werkzeug-0.11.10 click-6.6 itsdangerous-0.24 mongoengine-0.10.6 pymongo-3.3.0
gerard@sirius:~/docker/autobuilder/runner$ 
</pre></div>


<p>Puesto que el <em>script</em> llamado <em>build.sh</em> deja el fichero <em>.tar.gz</em> en <em>/shared</em>, y este es un volumen montado en la carpeta actual, vemos que nos aparece nuestro producto compilado.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/autobuilder$ tree
.
├── builder
│   ├── build.sh
│   └── Dockerfile
└── runner
    ├── app.ini
    ├── app.tar.gz
    └── Dockerfile

<span class="m">2</span> directories, <span class="m">5</span> files
gerard@sirius:~/docker/autobuilder$ 
</pre></div>


<p>Efectivamente, este <em>bundle</em> contiene la aplicación y el <em>virtualenv</em> en la forma requerida, así que el siguiente paso es construir la imagen de <em>runtime</em> con este <em>bundle</em> incorporado.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/autobuilder/runner$ docker build -t runner .
Sending build context to Docker daemon <span class="m">5</span>.027 MB
Step <span class="m">1</span> : FROM alpine:3.4
 ---&gt; 4e38e38c8ce0
Step <span class="m">2</span> : RUN apk add --no-cache uwsgi-python
 ---&gt; Running in 9233d11f6646
fetch http://dl-cdn.alpinelinux.org/alpine/v3.4/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.4/community/x86_64/APKINDEX.tar.gz
<span class="o">(</span><span class="m">1</span>/14<span class="o">)</span> Installing mailcap <span class="o">(</span><span class="m">2</span>.1.44-r0<span class="o">)</span>
<span class="o">(</span><span class="m">2</span>/14<span class="o">)</span> Installing pcre <span class="o">(</span><span class="m">8</span>.38-r1<span class="o">)</span>
<span class="o">(</span><span class="m">3</span>/14<span class="o">)</span> Installing uwsgi <span class="o">(</span><span class="m">2</span>.0.13-r0<span class="o">)</span>
<span class="o">(</span><span class="m">4</span>/14<span class="o">)</span> Installing libbz2 <span class="o">(</span><span class="m">1</span>.0.6-r4<span class="o">)</span>
<span class="o">(</span><span class="m">5</span>/14<span class="o">)</span> Installing expat <span class="o">(</span><span class="m">2</span>.1.1-r1<span class="o">)</span>
<span class="o">(</span><span class="m">6</span>/14<span class="o">)</span> Installing libffi <span class="o">(</span><span class="m">3</span>.2.1-r2<span class="o">)</span>
<span class="o">(</span><span class="m">7</span>/14<span class="o">)</span> Installing gdbm <span class="o">(</span><span class="m">1</span>.11-r1<span class="o">)</span>
<span class="o">(</span><span class="m">8</span>/14<span class="o">)</span> Installing ncurses-terminfo-base <span class="o">(</span><span class="m">6</span>.0-r7<span class="o">)</span>
<span class="o">(</span><span class="m">9</span>/14<span class="o">)</span> Installing ncurses-terminfo <span class="o">(</span><span class="m">6</span>.0-r7<span class="o">)</span>
<span class="o">(</span><span class="m">10</span>/14<span class="o">)</span> Installing ncurses-libs <span class="o">(</span><span class="m">6</span>.0-r7<span class="o">)</span>
<span class="o">(</span><span class="m">11</span>/14<span class="o">)</span> Installing readline <span class="o">(</span><span class="m">6</span>.3.008-r4<span class="o">)</span>
<span class="o">(</span><span class="m">12</span>/14<span class="o">)</span> Installing sqlite-libs <span class="o">(</span><span class="m">3</span>.13.0-r0<span class="o">)</span>
<span class="o">(</span><span class="m">13</span>/14<span class="o">)</span> Installing python <span class="o">(</span><span class="m">2</span>.7.12-r0<span class="o">)</span>
<span class="o">(</span><span class="m">14</span>/14<span class="o">)</span> Installing uwsgi-python <span class="o">(</span><span class="m">2</span>.0.13-r0<span class="o">)</span>
Executing busybox-1.24.2-r9.trigger
OK: <span class="m">53</span> MiB in <span class="m">25</span> packages
 ---&gt; b7c2de7c84d1
Removing intermediate container 9233d11f6646
Step <span class="m">3</span> : ADD app.tar.gz /
 ---&gt; 9b8046268ece
Removing intermediate container 0a5f930580a2
Step <span class="m">4</span> : COPY app.ini /app/
 ---&gt; 345641630c11
Removing intermediate container 8b0fe594e89d
Step <span class="m">5</span> : ENTRYPOINT uwsgi --ini /app/app.ini
 ---&gt; Running in 586c9d5f49ae
 ---&gt; a83cfc054bdc
Removing intermediate container 586c9d5f49ae
Successfully built a83cfc054bdc
gerard@sirius:~/docker/autobuilder/runner$ 
</pre></div>


<p>Y con esto tenemos nuestra imagen.</p>
<h2>Ejecutando la imagen</h2>
<p>Esta parte no tiene mucho misterio; basta con ejecutar la imagen como lo haríamos normalmente. Esta aplicación en concreto lee las configuraciones desde las variables de entorno, así que se las ponemos. En este caso particular, tenemos la imagen de <strong>Docker Hub</strong> <a href="https://hub.docker.com/_/mongo/">mongo</a> en la dirección <em>IP</em> indicada.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/autobuilder/runner$ docker run -ti --rm -p <span class="m">8888</span>:8080 -e <span class="s2">&quot;MONGODB_URI=mongodb://172.17.0.2:27017/shop&quot;</span> runner
...
</pre></div>


<p>Podemos comprobar que todo funciona lanzando una petición <em>HTTP</em> estándar:</p>
<div class="highlight"><pre><span></span>gerard@sirius:~$ curl http://localhost:8888/
&lt;h1&gt;Fruits&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Apple&lt;/li&gt;
&lt;li&gt;Orange&lt;/li&gt;
&lt;li&gt;Pear&lt;/li&gt;
&lt;/ul&gt;
gerard@sirius:~$ 
</pre></div>


<p>Y ahora podemos ver que la imagen de <em>runtime</em> queda mucho mas reducida, mas rápida de construir y sin tanto <em>bloat</em>. Supongo que podemos reducir mas lo que ocupa la imagen seleccionando versiones de <strong>python</strong> alternativas; el sistema operativo base son solo 4.8mb...</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/docker/autobuilder/runner$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
runner              latest              e190cce7685a        <span class="m">31</span> seconds ago      <span class="m">60</span>.75 MB
builder             latest              edf62460d187        <span class="m">7</span> minutes ago       <span class="m">164</span> MB
gerard@sirius:~/docker/autobuilder/runner$ 
</pre></div>


<p>De hecho, la <em>cache</em> de <strong>Docker</strong> funciona a las mil maravillas en este caso; si hubiera que reconstruir la imagen de <em>runtime</em>, se ejecutarían solo los pasos 3, 4 y 5. Esto convierte el hecho de "hacer una <em>release</em>" en casi inmediato.</p>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Posts relacionados:</h4>
    <ul>
        <li><a href="https://www.linuxsysadmin.ml/2018/07/un-servidor-pypi-local-con-docker.html">Un servidor pypi local con Docker</a></li>
        <li><a href="https://www.linuxsysadmin.ml/2017/05/docker-1705-con-multi-stage-build.html">Docker 17.05 con multi-stage build</a></li>
        <li><a href="https://www.linuxsysadmin.ml/2017/05/problemas-de-log-con-docker-y-python.html">Problemas de log con docker y python</a></li>
    </ul>
</section>
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'linuxsysadmin-gmb'; // required: replace example with your forum shortname

                    var disqus_identifier = 'separando-el-build-y-el-runtime-con-contenedores-docker';
                var disqus_url = 'https://www.linuxsysadmin.ml/2016/10/separando-el-build-y-el-runtime-con-contenedores-docker.html';

            var disqus_config = function () {
                this.language = "es";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://github.com/sirtea"><i class="fa fa-github-square fa-lg"></i> GitHub</a></li>
              </ul>
            </li>


            <li class="list-group-item"><a href="https://www.linuxsysadmin.ml/categories.html"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categorías</span></h4></a>
                <ul class="list-group" id="categories">
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/desarrollo.html">
                            <i class="fa fa-folder-open fa-lg"></i> Desarrollo
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/miscelanea.html">
                            <i class="fa fa-folder-open fa-lg"></i> Miscelánea
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/operaciones.html">
                            <i class="fa fa-folder-open fa-lg"></i> Operaciones
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/seguridad.html">
                            <i class="fa fa-folder-open fa-lg"></i> Seguridad
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/sistemas.html">
                            <i class="fa fa-folder-open fa-lg"></i> Sistemas
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/virtualizacion.html">
                            <i class="fa fa-folder-open fa-lg"></i> Virtualización
                        </a>
                    </li>
                </ul>
            </li>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Sidebar linuxsysadmin -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6984858420847602"
     data-ad-slot="1931313371"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

            <li class="list-group-item"><a href="https://www.linuxsysadmin.ml/tags.html"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group list-inline tagcloud" id="tags">
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/2-way-ssl.html">
                            2 way ssl
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/ansible.html">
                            ansible
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/api.html">
                            api
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/apt.html">
                            apt
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/archlinux.html">
                            archlinux
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/autenticacion.html">
                            autenticación
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/autenticacion-basica.html">
                            autenticacion basica
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/balanceador.html">
                            balanceador
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/bash.html">
                            bash
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/basico.html">
                            básico
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/blog.html">
                            blog
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/bridge.html">
                            bridge
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/build.html">
                            build
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/cache.html">
                            cache
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/centos.html">
                            centos
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/certificado.html">
                            certificado
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/cluster.html">
                            cluster
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/consul.html">
                            consul
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/contenedor.html">
                            contenedor
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/css.html">
                            CSS
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/curl.html">
                            curl
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/debian.html">
                            debian
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/debootstrap.html">
                            debootstrap
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/dig.html">
                            dig
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/dns.html">
                            dns
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/dnsmasq.html">
                            dnsmasq
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/docker.html">
                            docker
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/docker-compose.html">
                            docker-compose
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/dockerfile.html">
                            Dockerfile
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/drill.html">
                            drill
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/escritorio.html">
                            escritorio
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/failover.html">
                            failover
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/firehol.html">
                            firehol
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/flask.html">
                            flask
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/framework.html">
                            framework
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/gateway.html">
                            gateway
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/ghost.html">
                            ghost
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/git.html">
                            git
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/haproxy.html">
                            haproxy
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/html.html">
                            html
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/https.html">
                            https
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/jaula.html">
                            jaula
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/jenkins.html">
                            jenkins
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/jessie.html">
                            jessie
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/json.html">
                            JSON
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/jsonschema.html">
                            jsonschema
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/keepalived.html">
                            keepalived
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/linux.html">
                            linux
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/logical-volume-manager.html">
                            logical volume manager
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/logs.html">
                            logs
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/logstash.html">
                            logstash
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/lvm.html">
                            lvm
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/lxc.html">
                            lxc
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/markdown.html">
                            markdown
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/master.html">
                            master
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/microframework.html">
                            microframework
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/migracion.html">
                            migración
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/mongodb.html">
                            mongodb
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/mount.html">
                            mount
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/nginx.html">
                            nginx
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/nmap.html">
                            nmap
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/passphrase.html">
                            passphrase
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/password.html">
                            password
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/php.html">
                            php
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/playbook.html">
                            playbook
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/proxy.html">
                            proxy
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/pypi.html">
                            PyPI
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/python.html">
                            python
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/redhat.html">
                            redhat
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/registro.html">
                            registro
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/remota.html">
                            remota
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/replica-set.html">
                            replica set
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/rest.html">
                            REST
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/rssh.html">
                            rssh
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/rsync.html">
                            rsync
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/s6.html">
                            s6
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/script.html">
                            script
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/service-discovery.html">
                            service discovery
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/sftp.html">
                            sftp
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/sharding.html">
                            sharding
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/slave.html">
                            slave
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/squashfs.html">
                            squashfs
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/ssh.html">
                            ssh
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/sshfs.html">
                            sshfs
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/ssl.html">
                            ssl
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/stretch.html">
                            stretch
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/swarm.html">
                            swarm
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/systemd.html">
                            systemd
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/tls.html">
                            tls
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/traefik.html">
                            traefik
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/tunel.html">
                            túnel
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/ubuntu.html">
                            ubuntu
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/unidad.html">
                            unidad
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/uwsgi.html">
                            uWSGI
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/variable.html">
                            variable
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/virtual-hosts.html">
                            virtual hosts
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/virtualenv.html">
                            virtualenv
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/volumenes.html">
                            volumenes
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/wheel.html">
                            wheel
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/xfce.html">
                            xfce
                        </a>
                    </li>
                </ul>
            </li>


    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Gerard
            &middot; Generado por <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Volver arriba</a></p></div>
      </div>
   </div>
</footer>
<script src="https://www.linuxsysadmin.ml/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://www.linuxsysadmin.ml/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://www.linuxsysadmin.ml/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'linuxsysadmin-gmb'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-68486572-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>