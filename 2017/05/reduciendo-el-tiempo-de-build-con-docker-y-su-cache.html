<!DOCTYPE html>
<html lang="es" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Reduciendo el tiempo de build con Docker y su caché - Linux Sysadmin</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="http://www.linuxsysadmin.ml/2017/05/reduciendo-el-tiempo-de-build-con-docker-y-su-cache.html">

        <meta name="author" content="Gerard" />
        <meta name="keywords" content="docker,dockerfile,cache" />
        <meta name="description" content="Cuando construimos imágenes docker, muchas veces no somos conscientes del poder de la caché integrada. Si reordenamos algunas instrucciones y aplicamos algún truco, podemos evitarnos el hecho de reconstruir muchas de esas capas, llegando a reducir el tiempo de rebuild a prácticamente cero, siempre y cuando no hayan grandes cambios …" />

        <meta property="og:site_name" content="Linux Sysadmin" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Reduciendo el tiempo de build con Docker y su caché"/>
        <meta property="og:url" content="http://www.linuxsysadmin.ml/2017/05/reduciendo-el-tiempo-de-build-con-docker-y-su-cache.html"/>
        <meta property="og:description" content="Cuando construimos imágenes docker, muchas veces no somos conscientes del poder de la caché integrada. Si reordenamos algunas instrucciones y aplicamos algún truco, podemos evitarnos el hecho de reconstruir muchas de esas capas, llegando a reducir el tiempo de rebuild a prácticamente cero, siempre y cuando no hayan grandes cambios …"/>
        <meta property="article:published_time" content="2017-05-08" />
            <meta property="article:section" content="Operaciones" />
            <meta property="article:tag" content="docker" />
            <meta property="article:tag" content="dockerfile" />
            <meta property="article:tag" content="cache" />
            <meta property="article:author" content="Gerard" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://www.linuxsysadmin.ml/theme/css/bootstrap.cosmo.min.css" type="text/css"/>
    <link href="http://www.linuxsysadmin.ml/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://www.linuxsysadmin.ml/theme/css/pygments/vim.css" rel="stylesheet">
    <link rel="stylesheet" href="http://www.linuxsysadmin.ml/theme/css/style.css" type="text/css"/>
        <link href="http://www.linuxsysadmin.ml/static/custom.css" rel="stylesheet">

        <link href="http://www.linuxsysadmin.ml/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Linux Sysadmin ATOM Feed"/>



        <link href="http://www.linuxsysadmin.ml/feeds/operaciones.atom.xml" type="application/atom+xml" rel="alternate"
              title="Linux Sysadmin Operaciones ATOM Feed"/>

    <!-- Begin Cookie Consent plugin by Silktide - http://silktide.com/cookieconsent -->
    <script type="text/javascript">
        window.cookieconsent_options = {"message":"De acuerdo a la ley vigente, estoy obligado a informarte de la obviedad de que este sitio utiliza cookies.","dismiss":"Acepto","learnMore":"Mas información","link":null,"theme":"dark-bottom"};
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js"></script>
    <!-- End Cookie Consent plugin -->

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://www.linuxsysadmin.ml/" class="navbar-brand">
Linux Sysadmin            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="http://www.linuxsysadmin.ml/about.html">
                             Sobre mí
                          </a></li>
                         <li><a href="http://www.linuxsysadmin.ml/curriculum.html">
                             Curriculum Vitae
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="http://www.linuxsysadmin.ml/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archivos</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
            <ol class="breadcrumb">
                <li><a href="http://www.linuxsysadmin.ml" title="Linux Sysadmin"><i class="fa fa-home fa-lg"></i></a></li>
                <li><a href="http://www.linuxsysadmin.ml/category/operaciones.html" title="Operaciones">Operaciones</a></li>
                <li class="active">Reduciendo el tiempo de build con Docker y su caché</li>
            </ol>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Banner linuxsysadmin -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6984858420847602"
     data-ad-slot="7977846974"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://www.linuxsysadmin.ml/2017/05/reduciendo-el-tiempo-de-build-con-docker-y-su-cache.html"
                       rel="bookmark"
                       title="Permalink to Reduciendo el tiempo de build con Docker y su caché">
                        Reduciendo el tiempo de build con Docker y su caché
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Fecha</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2017-05-08T10:00:00+02:00"> 2017-05-08</time>
    </span>


            <span class="label label-default">Autor</span>
            <a href="http://www.linuxsysadmin.ml/author/gerard.html"><i class="fa fa-user"></i> Gerard</a>

        <span class="label label-default">Tiempo de lectura</span> 8 minutos
        <span class="label label-default">Categoría</span>
        <a href="http://www.linuxsysadmin.ml/category/operaciones.html">Operaciones</a>


<span class="label label-default">Tags</span>
	<a href="http://www.linuxsysadmin.ml/tag/docker.html">docker</a>
        /
	<a href="http://www.linuxsysadmin.ml/tag/dockerfile.html">dockerfile</a>
        /
	<a href="http://www.linuxsysadmin.ml/tag/cache.html">cache</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Cuando construimos imágenes <strong>docker</strong>, muchas veces no somos conscientes del poder de la caché integrada. Si reordenamos algunas instrucciones y aplicamos algún truco, podemos evitarnos el hecho de reconstruir muchas de esas capas, llegando a reducir el tiempo de <em>rebuild</em> a prácticamente cero, siempre y cuando no hayan grandes cambios.</p>
<p>Esa es una reflexión que me hice el otro día. Es verdad que con la caché integrada me ahorro de descargar la imagen base y de instalar algunas dependencias habituales, pero usando la cabeza descubrí que puedo conseguir mucho más.</p>
<p>Es muy habitual que tenga que construir proyectos que usen <strong>python</strong>, pero me molesta un poco tener que perder el tiempo en el comando <strong>pip</strong> instalando dependencias; hay que tener en cuenta que casi nunca cambian entre diferentes versiones y es un tiempo que no sería necesario.</p>
<p>Así que hice el ejercicio de reordenar las instrucciones en mi <em>Dockerfile</em>, moviendo al principio aquellas instrucciones que raramente provocarán cambios, y dejando al final aquellas que es más frecuente que cambien, y por lo tanto, que necesiten ser reconstruidas.</p>
<h2>Un ejemplo práctico</h2>
<p>Para empezar, vamos a usar un aplicación simple, concretamente un <em>hello world</em> estándar con un <em>microframework</em> llamado <strong>bottle</strong>.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~/docker/myapp$ tree
.
├── app
│   ├── app.py
│   └── requirements.txt
└── Dockerfile

<span class="m">1</span> directory, <span class="m">3</span> files
gerard@aldebaran:~/docker/myapp$ 
</pre></div>


<p>Realmente la aplicación es lo de menos, siendo este ejemplo extrapolable a cada <em>framework</em> o librería que se necesite; se incluyen por tener el ejemplo completo.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~/docker/myapp$ cat app/app.py 
from bottle import Bottle

<span class="nv">app</span> <span class="o">=</span> Bottle<span class="o">()</span>

@app.get<span class="o">(</span><span class="s1">&#39;/&#39;</span><span class="o">)</span>
def hello<span class="o">()</span>:
    <span class="k">return</span> <span class="s1">&#39;Hello world!&#39;</span>
gerard@aldebaran:~/docker/myapp$ cat app/requirements.txt 
<span class="nv">bottle</span><span class="o">==</span><span class="m">0</span>.12.13
gerard@aldebaran:~/docker/myapp$ cat app/app.py 
from bottle import Bottle

<span class="nv">app</span> <span class="o">=</span> Bottle<span class="o">()</span>

@app.get<span class="o">(</span><span class="s1">&#39;/&#39;</span><span class="o">)</span>
def hello<span class="o">()</span>:
    <span class="k">return</span> <span class="s1">&#39;Hello world!&#39;</span>
gerard@aldebaran:~/docker/myapp$ 
</pre></div>


<p>Para construir la imagen, usamos un <em>Dockerfile</em> muy estándar y nada complejo:</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~/docker/myapp$ cat Dockerfile
FROM alpine:3.5
RUN apk add --no-cache py-gunicorn py2-pip
COPY app/ /srv/app/
RUN pip install -r /srv/app/requirements.txt
CMD <span class="o">[</span><span class="s2">&quot;gunicorn&quot;</span>, <span class="s2">&quot;--bind=0.0.0.0:8080&quot;</span>, <span class="s2">&quot;--user=nobody&quot;</span>, <span class="s2">&quot;--group=nobody&quot;</span>, <span class="s2">&quot;--workers=2&quot;</span>, <span class="s2">&quot;--chdir=/srv/app&quot;</span>, <span class="s2">&quot;app:app&quot;</span><span class="o">]</span>
gerard@aldebaran:~/docker/myapp$ 
</pre></div>


<p>Así que construimos nuestra imagen, con el comando habitual:</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~/docker/myapp$ docker build -t myapp:1.0 .
Sending build context to Docker daemon  <span class="m">5</span>.632kB
...  
Successfully built 46611b6a730f
gerard@aldebaran:~/docker/myapp$ 
</pre></div>


<p>No es difícil comprobar lo que pasa cuando modificamos un poco nuestra aplicación, que en este caso se localiza entera en <em>app.py</em>: se reconstruyen todos los pasos a partir del tercero (el COPY).</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~/docker/myapp$ docker build -t myapp:1.1 .
Sending build context to Docker daemon  <span class="m">5</span>.632kB
Step <span class="m">1</span>/5 : FROM alpine:3.5
 ---&gt; 4a415e366388
Step <span class="m">2</span>/5 : RUN apk add --no-cache py-gunicorn py2-pip
 ---&gt; Using cache
 ---&gt; fa57ea0220f9
Step <span class="m">3</span>/5 : COPY app/ /srv/app/
 ---&gt; dcaa218d663e
Removing intermediate container 800e88f3a533
Step <span class="m">4</span>/5 : RUN pip install -r /srv/app/requirements.txt
 ---&gt; Running in 29914cddfb3d
Collecting <span class="nv">bottle</span><span class="o">==</span><span class="m">0</span>.12.13 <span class="o">(</span>from -r /srv/app/requirements.txt <span class="o">(</span>line <span class="m">1</span><span class="o">))</span>
  Downloading bottle-0.12.13.tar.gz <span class="o">(</span>70kB<span class="o">)</span>
Installing collected packages: bottle
  Running setup.py install <span class="k">for</span> bottle: started
    Running setup.py install <span class="k">for</span> bottle: finished with status <span class="s1">&#39;done&#39;</span>
Successfully installed bottle-0.12.13
You are using pip version <span class="m">9</span>.0.0, however version <span class="m">9</span>.0.1 is available.
You should consider upgrading via the <span class="s1">&#39;pip install --upgrade pip&#39;</span> command.
 ---&gt; 4e294d8038a8
Removing intermediate container 29914cddfb3d
Step <span class="m">5</span>/5 : CMD gunicorn --bind<span class="o">=</span><span class="m">0</span>.0.0.0:8080 --user<span class="o">=</span>nobody --group<span class="o">=</span>nobody --workers<span class="o">=</span><span class="m">2</span> --chdir<span class="o">=</span>/srv/app app:app
 ---&gt; Running in 6021cfceff96
 ---&gt; b781e46aec9c
Removing intermediate container 6021cfceff96
Successfully built b781e46aec9c
gerard@aldebaran:~/docker/myapp$ 
</pre></div>


<p>A partir de aquí, vamos a intentar mejorar eso.</p>
<h3>Reordenamos las capas: las menos probables de cambio, antes</h3>
<p>En este ejemplo, no hay mucho que cambiar; solo hay una instrucción que es siempre la misma (el CMD), pero que se reconstruye porque las anteriores también lo hacen. En este caso, solo le indica el comando de <em>runtime</em>, y para esto no se depende ni del COPY, ni del <em>pip install</em>, así que puede ir antes de ambas.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~/docker/myapp$ cat Dockerfile
FROM alpine:3.5
RUN apk add --no-cache py-gunicorn py2-pip
CMD <span class="o">[</span><span class="s2">&quot;gunicorn&quot;</span>, <span class="s2">&quot;--bind=0.0.0.0:8080&quot;</span>, <span class="s2">&quot;--user=nobody&quot;</span>, <span class="s2">&quot;--group=nobody&quot;</span>, <span class="s2">&quot;--workers=2&quot;</span>, <span class="s2">&quot;--chdir=/srv/app&quot;</span>, <span class="s2">&quot;app:app&quot;</span><span class="o">]</span>
COPY app/ /srv/app/
RUN pip install -r /srv/app/requirements.txt
gerard@aldebaran:~/docker/myapp$ 
</pre></div>


<p>En este punto no nos queda más remedio que reconstruir las 3 capas de nuevo, pero vemos que los <em>builds</em> sucesivos (con la aplicación modificada) no van a provocar cambio en esa capa.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~/docker/myapp$ docker build -t myapp:1.2 .
Sending build context to Docker daemon  <span class="m">5</span>.632kB
...  
Successfully built b9ca6021019e
gerard@aldebaran:~/docker/myapp$ 
</pre></div>


<p>Cambiamos nuestra aplicación, y vemos que el paso CMD no se reconstruye:</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~/docker/myapp$ docker build -t myapp:1.3 .
Sending build context to Docker daemon  <span class="m">5</span>.632kB
...  
Step <span class="m">3</span>/5 : CMD gunicorn --bind<span class="o">=</span><span class="m">0</span>.0.0.0:8080 --user<span class="o">=</span>nobody --group<span class="o">=</span>nobody --workers<span class="o">=</span><span class="m">2</span> --chdir<span class="o">=</span>/srv/app app:app
 ---&gt; Using cache
 ---&gt; 0e99aa9dd9cf
...  
Successfully built b4289c56e7cb
gerard@aldebaran:~/docker/myapp$ 
</pre></div>


<p>Y con esto nos ahorramos reconstruir capas que realmente no cambian, pero ven forzada su reconstrucción porque las capas anteriores sí lo hacen. En un caso más complejo, el beneficio se notaría más que en este pequeño ejemplo.</p>
<h3>Copias parciales para ahorrarnos capas</h3>
<p>El ejemplo anterior ha supuesto una mejora, pero vemos un hecho curioso: el <em>pip install</em> es el paso más lento en una reconstrucción y no sería necesario en caso de no cambiar las dependencias de nuestra aplicación, que es la mayoría de veces. Entonces, ¿Porqué se tiene que rehacer cada vez, para obtener exactamente el mismo resultado?</p>
<p>Simplemente se hace porque al copiar la carpeta, <strong>docker</strong> detecta un cambio <em>en alguno</em> de los ficheros, y por diseño, invalida la capa equivalente. Esto causa una invalidación de caché en cascada y obliga a las siguientes instrucciones a rehacerse.</p>
<p>El truco consiste en copiar solamente el fichero de requisitos, con la esperanza de que no haya cambiado, lo que nos ahorraría el <em>pip install</em>, ya que no invalidaría las capas de caché. El resto de la aplicación se puede copiar después.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~/docker/myapp$ cat Dockerfile
FROM alpine:3.5
RUN apk add --no-cache py-gunicorn py2-pip
CMD <span class="o">[</span><span class="s2">&quot;gunicorn&quot;</span>, <span class="s2">&quot;--bind=0.0.0.0:8080&quot;</span>, <span class="s2">&quot;--user=nobody&quot;</span>, <span class="s2">&quot;--group=nobody&quot;</span>, <span class="s2">&quot;--workers=2&quot;</span>, <span class="s2">&quot;--chdir=/srv/app&quot;</span>, <span class="s2">&quot;app:app&quot;</span><span class="o">]</span>
COPY app/requirements.txt /srv/app/
RUN pip install -r /srv/app/requirements.txt
COPY app/ /srv/app/
gerard@aldebaran:~/docker/myapp$ 
</pre></div>


<p>Construimos la imagen dos veces, una para crear la nueva estructura de capas (el precio de la primera construcción), y la otra para ver el beneficio de la nueva aproximación.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~/docker/myapp$ docker build -t myapp:1.4 .
Sending build context to Docker daemon  <span class="m">5</span>.632kB
...  
Successfully built c64016c758a4
gerard@aldebaran:~/docker/myapp$ 
</pre></div>


<p>Y a partir de ahora, cada cambio de código que no implique un cambio en el <em>requirements.txt</em>, solo implicará copiar ese código sobre la capa que ya contiene nuestras dependencias, ahorrándonos el <em>pip install</em>, y convirtiendo el proceso de <em>build</em> en algo casi instantáneo.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~/docker/myapp$ <span class="nb">time</span> docker build -t myapp:1.5 .
Sending build context to Docker daemon  <span class="m">5</span>.632kB
Step <span class="m">1</span>/6 : FROM alpine:3.5
 ---&gt; 4a415e366388
Step <span class="m">2</span>/6 : RUN apk add --no-cache py-gunicorn py2-pip
 ---&gt; Using cache
 ---&gt; fa57ea0220f9
Step <span class="m">3</span>/6 : CMD gunicorn --bind<span class="o">=</span><span class="m">0</span>.0.0.0:8080 --user<span class="o">=</span>nobody --group<span class="o">=</span>nobody --workers<span class="o">=</span><span class="m">2</span> --chdir<span class="o">=</span>/srv/app app:app
 ---&gt; Using cache
 ---&gt; 0e99aa9dd9cf
Step <span class="m">4</span>/6 : COPY app/requirements.txt /srv/app/
 ---&gt; Using cache
 ---&gt; 32595afecfc4
Step <span class="m">5</span>/6 : RUN pip install -r /srv/app/requirements.txt
 ---&gt; Using cache
 ---&gt; e37068fe5c99
Step <span class="m">6</span>/6 : COPY app/ /srv/app/
 ---&gt; d31b7abdbfb2
Removing intermediate container 01e78f27475d
Successfully built d31b7abdbfb2

real    0m0.330s
user    0m0.004s
sys 0m0.004s
gerard@aldebaran:~/docker/myapp$ 
</pre></div>


<p>De hecho, podemos ver que las capas compartidas entre las versiones con este nuevo truco se comparten casi todas. Esto hace que las nuevas versiones apenas ocupen espacio en disco (117 bytes en el ejemplo), siendo una capa con solamente nuestro código.</p>
<div class="highlight"><pre><span></span>gerard@aldebaran:~/docker/myapp$ docker <span class="nb">history</span> myapp:1.4
IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT
c64016c758a4        <span class="m">7</span> minutes ago       /bin/sh -c <span class="c1">#(nop) COPY dir:244f5d5a6f7ec84...   117B                </span>
e37068fe5c99        <span class="m">7</span> minutes ago       /bin/sh -c pip install -r /srv/app/require...   573kB               
32595afecfc4        <span class="m">7</span> minutes ago       /bin/sh -c <span class="c1">#(nop) COPY file:2f968d5854b929...   16B                 </span>
0e99aa9dd9cf        <span class="m">21</span> minutes ago      /bin/sh -c <span class="c1">#(nop)  CMD [&quot;gunicorn&quot; &quot;--bind...   0B                  </span>
fa57ea0220f9        <span class="m">31</span> minutes ago      /bin/sh -c apk add --no-cache py-gunicorn ...   <span class="m">48</span>.4MB              
4a415e366388        <span class="m">6</span> weeks ago         /bin/sh -c <span class="c1">#(nop) ADD file:730030a984f5f0c...   3.99MB              </span>
gerard@aldebaran:~/docker/myapp$ docker <span class="nb">history</span> myapp:1.5
IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT
d31b7abdbfb2        <span class="m">3</span> minutes ago       /bin/sh -c <span class="c1">#(nop) COPY dir:36a1b0f6acdabc2...   117B                </span>
e37068fe5c99        <span class="m">7</span> minutes ago       /bin/sh -c pip install -r /srv/app/require...   573kB               
32595afecfc4        <span class="m">7</span> minutes ago       /bin/sh -c <span class="c1">#(nop) COPY file:2f968d5854b929...   16B                 </span>
0e99aa9dd9cf        <span class="m">21</span> minutes ago      /bin/sh -c <span class="c1">#(nop)  CMD [&quot;gunicorn&quot; &quot;--bind...   0B                  </span>
fa57ea0220f9        <span class="m">31</span> minutes ago      /bin/sh -c apk add --no-cache py-gunicorn ...   <span class="m">48</span>.4MB              
4a415e366388        <span class="m">6</span> weeks ago         /bin/sh -c <span class="c1">#(nop) ADD file:730030a984f5f0c...   3.99MB              </span>
gerard@aldebaran:~/docker/myapp$ 
</pre></div>


<p>La parte mala, es que el fichero <em>requirements.txt</em> se copia dos veces en nuestra imagen, en ambos COPY. Con un poco de trabajo podría evitarse eso pero, puesto que ocupa relativamente poco, es un precio que estoy dispuesto a pagar para tener <em>builds</em> instantáneos.</p>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Posts relacionados:</h4>
    <ul>
        <li><a href="http://www.linuxsysadmin.ml/2017/09/un-proceso-inicial-para-docker-tini-y-dumb-init.html">Un proceso inicial para docker: tini y dumb-init</a></li>
        <li><a href="http://www.linuxsysadmin.ml/2017/08/creando-imagenes-con-estilo-la-instruccion-onbuild.html">Creando imágenes con estilo: la instrucción ONBUILD</a></li>
        <li><a href="http://www.linuxsysadmin.ml/2017/05/docker-1705-con-multi-stage-build.html">Docker 17.05 con multi-stage build</a></li>
    </ul>
</section>
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'linuxsysadmin-gmb'; // required: replace example with your forum shortname

                    var disqus_identifier = 'reduciendo-el-tiempo-de-build-con-docker-y-su-cache';
                var disqus_url = 'http://www.linuxsysadmin.ml/2017/05/reduciendo-el-tiempo-de-build-con-docker-y-su-cache.html';

            var disqus_config = function () {
                this.language = "es";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://github.com/sirtea"><i class="fa fa-github-square fa-lg"></i> GitHub</a></li>
              </ul>
            </li>


            <li class="list-group-item"><a href="http://www.linuxsysadmin.ml/categories.html"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categorías</span></h4></a>
                <ul class="list-group" id="categories">
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.ml/category/desarrollo.html">
                            <i class="fa fa-folder-open fa-lg"></i> Desarrollo
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.ml/category/miscelanea.html">
                            <i class="fa fa-folder-open fa-lg"></i> Miscelánea
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.ml/category/operaciones.html">
                            <i class="fa fa-folder-open fa-lg"></i> Operaciones
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.ml/category/seguridad.html">
                            <i class="fa fa-folder-open fa-lg"></i> Seguridad
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.ml/category/sistemas.html">
                            <i class="fa fa-folder-open fa-lg"></i> Sistemas
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="http://www.linuxsysadmin.ml/category/virtualizacion.html">
                            <i class="fa fa-folder-open fa-lg"></i> Virtualización
                        </a>
                    </li>
                </ul>
            </li>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Sidebar linuxsysadmin -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6984858420847602"
     data-ad-slot="1931313371"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

            <li class="list-group-item"><a href="http://www.linuxsysadmin.ml/tags.html"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group list-inline tagcloud" id="tags">
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/2-way-ssl.html">
                            2 way ssl
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/alpine.html">
                            alpine
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/ansible.html">
                            ansible
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/api.html">
                            api
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/apt.html">
                            apt
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/archlinux.html">
                            archlinux
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/autenticacion.html">
                            autenticación
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/authorized_keys.html">
                            authorized_keys
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/balanceador.html">
                            balanceador
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/bash.html">
                            bash
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/basico.html">
                            básico
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/blog.html">
                            blog
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/bloques-reservados.html">
                            bloques reservados
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/bridge.html">
                            bridge
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/build.html">
                            build
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/cache.html">
                            cache
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/centos.html">
                            centos
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/certificado.html">
                            certificado
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/cluster.html">
                            cluster
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/consul.html">
                            consul
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/contenedor.html">
                            contenedor
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/css.html">
                            CSS
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/curl.html">
                            curl
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.ml/tag/debian.html">
                            debian
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/debootstrap.html">
                            debootstrap
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/dns.html">
                            dns
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/dnsmasq.html">
                            dnsmasq
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.ml/tag/docker.html">
                            docker
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/docker-compose.html">
                            docker-compose
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/dockerfile.html">
                            Dockerfile
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/escritorio.html">
                            escritorio
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/failover.html">
                            failover
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/firehol.html">
                            firehol
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/flask.html">
                            flask
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/framework.html">
                            framework
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/gateway.html">
                            gateway
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/ghost.html">
                            ghost
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/git.html">
                            git
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/haproxy.html">
                            haproxy
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/histfile.html">
                            histfile
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/html.html">
                            html
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/https.html">
                            https
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/jaula.html">
                            jaula
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.ml/tag/jessie.html">
                            jessie
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/keepalived.html">
                            keepalived
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.ml/tag/linux.html">
                            linux
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/logical-volume-manager.html">
                            logical volume manager
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/logs.html">
                            logs
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/logstash.html">
                            logstash
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/lvm.html">
                            lvm
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/lxc.html">
                            lxc
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/markdown.html">
                            markdown
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/memoria.html">
                            memoria
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/microframework.html">
                            microframework
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/migracion.html">
                            migración
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/mongodb.html">
                            mongodb
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/mount.html">
                            mount
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/nginx.html">
                            nginx
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/nmap.html">
                            nmap
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/passphrase.html">
                            passphrase
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/password.html">
                            password
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/pets-vs-cattle.html">
                            pets vs cattle
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/php.html">
                            php
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/playbook.html">
                            playbook
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/proxy.html">
                            proxy
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/pypi.html">
                            PyPI
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.ml/tag/python.html">
                            python
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/redhat.html">
                            redhat
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/remota.html">
                            remota
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/replica-set.html">
                            replica set
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/rest.html">
                            REST
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/rssh.html">
                            rssh
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/rsync.html">
                            rsync
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/s6.html">
                            s6
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/script.html">
                            script
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/service-discovery.html">
                            service discovery
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/sftp.html">
                            sftp
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/shadow.html">
                            shadow
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/sharding.html">
                            sharding
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/squashfs.html">
                            squashfs
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="http://www.linuxsysadmin.ml/tag/ssh.html">
                            ssh
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/sshfs.html">
                            sshfs
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/ssl.html">
                            ssl
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/stretch.html">
                            stretch
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/swap.html">
                            swap
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/swapfile.html">
                            swapfile
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/swarm.html">
                            swarm
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/systemd.html">
                            systemd
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/traefik.html">
                            traefik
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/tune2fs.html">
                            tune2fs
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/tunel.html">
                            túnel
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/ubuntu.html">
                            ubuntu
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="http://www.linuxsysadmin.ml/tag/unidad.html">
                            unidad
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/uwsgi.html">
                            uWSGI
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/variable.html">
                            variable
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/virtual-hosts.html">
                            virtual hosts
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="http://www.linuxsysadmin.ml/tag/virtualenv.html">
                            virtualenv
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/volumenes.html">
                            volumenes
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/wheel.html">
                            wheel
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="http://www.linuxsysadmin.ml/tag/xfce.html">
                            xfce
                        </a>
                    </li>
                </ul>
            </li>


    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Gerard
            &middot; Generado por <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Volver arriba</a></p></div>
      </div>
   </div>
</footer>
<script src="http://www.linuxsysadmin.ml/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://www.linuxsysadmin.ml/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://www.linuxsysadmin.ml/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'linuxsysadmin-gmb'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-68486572-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>