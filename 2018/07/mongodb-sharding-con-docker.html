<!DOCTYPE html>
<html lang="es" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>MongoDB sharding con docker - Linux Sysadmin</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://www.linuxsysadmin.ml/2018/07/mongodb-sharding-con-docker.html">

        <meta name="author" content="Gerard" />
        <meta name="keywords" content="mongodb,docker,sharding,cluster" />
        <meta name="description" content="El otro día estaba revisando viejos artículos, y me tropecé con uno anterior. Este estaba montado con ansible, y se me pasó por la cabeza reescribirlo usando contenedores con docker. Así pues, vamos a montar exactamente el mismo cluster, pero con el cambio que la última revolución tecnológica nos aporta …" />

        <meta property="og:site_name" content="Linux Sysadmin" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="MongoDB sharding con docker"/>
        <meta property="og:url" content="https://www.linuxsysadmin.ml/2018/07/mongodb-sharding-con-docker.html"/>
        <meta property="og:description" content="El otro día estaba revisando viejos artículos, y me tropecé con uno anterior. Este estaba montado con ansible, y se me pasó por la cabeza reescribirlo usando contenedores con docker. Así pues, vamos a montar exactamente el mismo cluster, pero con el cambio que la última revolución tecnológica nos aporta …"/>
        <meta property="article:published_time" content="2018-07-02" />
            <meta property="article:section" content="Sistemas" />
            <meta property="article:tag" content="mongodb" />
            <meta property="article:tag" content="docker" />
            <meta property="article:tag" content="sharding" />
            <meta property="article:tag" content="cluster" />
            <meta property="article:author" content="Gerard" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://www.linuxsysadmin.ml/theme/css/bootstrap.cosmo.min.css" type="text/css"/>
    <link href="https://www.linuxsysadmin.ml/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://www.linuxsysadmin.ml/theme/css/pygments/vim.css" rel="stylesheet">
    <link rel="stylesheet" href="https://www.linuxsysadmin.ml/theme/css/style.css" type="text/css"/>
        <link href="https://www.linuxsysadmin.ml/static/custom.css" rel="stylesheet">

        <link href="https://www.linuxsysadmin.ml/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Linux Sysadmin ATOM Feed"/>



        <link href="https://www.linuxsysadmin.ml/feeds/sistemas.atom.xml" type="application/atom+xml" rel="alternate"
              title="Linux Sysadmin Sistemas ATOM Feed"/>

    <!-- Begin Cookie Consent plugin by Silktide - http://silktide.com/cookieconsent -->
    <script type="text/javascript">
        window.cookieconsent_options = {"message":"De acuerdo a la ley vigente, estoy obligado a informarte de la obviedad de que este sitio utiliza cookies.","dismiss":"Acepto","learnMore":"Mas información","link":null,"theme":"dark-bottom"};
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js"></script>
    <!-- End Cookie Consent plugin -->

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://www.linuxsysadmin.ml/" class="navbar-brand">
Linux Sysadmin            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://www.linuxsysadmin.ml/about.html">
                             Sobre mí
                          </a></li>
                         <li><a href="https://www.linuxsysadmin.ml/curriculum.html">
                             Curriculum Vitae
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://www.linuxsysadmin.ml/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archivos</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
            <ol class="breadcrumb">
                <li><a href="https://www.linuxsysadmin.ml" title="Linux Sysadmin"><i class="fa fa-home fa-lg"></i></a></li>
                <li><a href="https://www.linuxsysadmin.ml/category/sistemas.html" title="Sistemas">Sistemas</a></li>
                <li class="active">MongoDB sharding con docker</li>
            </ol>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Banner linuxsysadmin -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6984858420847602"
     data-ad-slot="7977846974"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://www.linuxsysadmin.ml/2018/07/mongodb-sharding-con-docker.html"
                       rel="bookmark"
                       title="Permalink to MongoDB sharding con docker">
                        MongoDB sharding con docker
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Fecha</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2018-07-02T09:00:00+02:00"> 2018-07-02</time>
    </span>


            <span class="label label-default">Autor</span>
            <a href="https://www.linuxsysadmin.ml/author/gerard.html"><i class="fa fa-user"></i> Gerard</a>

        <span class="label label-default">Tiempo de lectura</span> 10 minutos
        <span class="label label-default">Categoría</span>
        <a href="https://www.linuxsysadmin.ml/category/sistemas.html">Sistemas</a>


<span class="label label-default">Tags</span>
	<a href="https://www.linuxsysadmin.ml/tag/mongodb.html">mongodb</a>
        /
	<a href="https://www.linuxsysadmin.ml/tag/docker.html">docker</a>
        /
	<a href="https://www.linuxsysadmin.ml/tag/sharding.html">sharding</a>
        /
	<a href="https://www.linuxsysadmin.ml/tag/cluster.html">cluster</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>El otro día estaba revisando viejos artículos, y me tropecé con <a href="https://www.linuxsysadmin.ml/2016/05/mongodb-sharding-con-ansible.html">uno anterior</a>. Este estaba montado con <strong>ansible</strong>, y se me pasó por la cabeza reescribirlo usando contenedores con <strong>docker</strong>. Así pues, vamos a montar exactamente el mismo <em>cluster</em>, pero con el cambio que la última revolución tecnológica nos aporta.</p>
<p><img alt="Sharded cluster" src="https://www.linuxsysadmin.ml/images/sharding_arquitectura_logica.jpg"></p>
<p>Aunque lo ideal sería desplegar todas las instancias en varias máquinas diferentes, voy a pasar; por comodidad, voy a desplegar todos los contenedores en una sola máquina mediante <strong>docker-compose</strong>. De esta forma puedo aprovechar las mismas imágenes sin una ocupación de disco elevada.</p>
<p>Como de costumbre, vamos a crear una carpeta para contener el proyecto y la vamos a llamar <code>sharding</code>. En ella voy a depositar los ficheros <code>Dockerfile</code> necesarios para la construcción de las imágenes, y de paso, el <code>docker-compose.yml</code> y las configuraciones que vamos a montar como volúmenes.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/workspace/sharding$ tree
.
├── build
│   ├── mongo
│   │   └── Dockerfile
│   ├── mongod
│   │   └── Dockerfile
│   └── mongos
│       └── Dockerfile
├── docker-compose.yml
├── mongod_aquila.conf
├── mongod_config.conf
├── mongod_cygnus.conf
├── mongod_lyra.conf
└── mongos.conf

<span class="m">4</span> directories, <span class="m">9</span> files
gerard@sirius:~/workspace/sharding$ 
</pre></div>


<h2>Construyendo las imágenes</h2>
<p>El primer paso para levantar el entorno son las imágenes que lo sostienen. Necesitamos 3 imágenes: una para el proceso <code>mongod</code> (que sostiene los <em>shards</em> y los <em>config server</em>), una para el proceso <code>mongos</code> (punto de entrada al <em>cluster</em>) y otra para el cliente <code>mongo</code> (que nos sirve para atar el <em>cluster</em>).</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/workspace/sharding$ cat build/mongod/Dockerfile 
FROM alpine:3.7
RUN apk add --no-cache mongodb <span class="o">&amp;&amp;</span> <span class="se">\</span>
    rm /usr/bin/mongo /usr/bin/mongos /usr/bin/mongoperf <span class="o">&amp;&amp;</span> <span class="se">\</span>
    install -d -o mongodb -g mongodb -m <span class="m">0755</span> /srv/mongodb
USER mongodb
CMD <span class="o">[</span><span class="s2">&quot;/usr/bin/mongod&quot;</span>, <span class="s2">&quot;--config&quot;</span>, <span class="s2">&quot;/etc/mongod.conf&quot;</span><span class="o">]</span>
gerard@sirius:~/workspace/sharding$ 
</pre></div>


<div class="highlight"><pre><span></span>gerard@sirius:~/workspace/sharding$ cat build/mongos/Dockerfile 
FROM alpine:3.7
RUN apk add --no-cache mongodb <span class="o">&amp;&amp;</span> <span class="se">\</span>
    rm /usr/bin/mongo /usr/bin/mongod /usr/bin/mongoperf
USER mongodb
CMD <span class="o">[</span><span class="s2">&quot;/usr/bin/mongos&quot;</span>, <span class="s2">&quot;--config&quot;</span>, <span class="s2">&quot;/etc/mongos.conf&quot;</span><span class="o">]</span>
gerard@sirius:~/workspace/sharding$ 
</pre></div>


<div class="highlight"><pre><span></span>gerard@sirius:~/workspace/sharding$ cat build/mongo/Dockerfile 
FROM alpine:3.7
RUN apk add --no-cache mongodb <span class="o">&amp;&amp;</span> <span class="se">\</span>
    rm /usr/bin/mongod /usr/bin/mongos /usr/bin/mongoperf
USER mongodb
gerard@sirius:~/workspace/sharding$ 
</pre></div>


<p>Solo nos queda construirlas usando los comandos habituales:</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/workspace/sharding$ docker build -t mongo-server build/mongod/
...
Successfully tagged mongo-server:latest
gerard@sirius:~/workspace/sharding$ 
</pre></div>


<div class="highlight"><pre><span></span>gerard@sirius:~/workspace/sharding$ docker build -t mongo-proxy build/mongos/
...
Successfully tagged mongo-proxy:latest
gerard@sirius:~/workspace/sharding$ 
</pre></div>


<div class="highlight"><pre><span></span>gerard@sirius:~/workspace/sharding$ docker build -t mongo-client build/mongo/
...
Successfully tagged mongo-client:latest
gerard@sirius:~/workspace/sharding$ 
</pre></div>


<h2>Levantando todos los procesos</h2>
<p>La parte más tediosa de levantar un <em>cluster</em> es levantar todos los procesos implicados. En el caso del <em>cluster</em> de ejemplo, necesitamos un mínimo de 13 procesos:</p>
<ul>
<li>1 <code>mongos</code> o más para poder utilizar e <em>cluster</em> de forma transparente</li>
<li>3 <code>mongod</code> en configuración de <em>replica set</em> para actuar como <em>config servers</em></li>
<li>3 <code>mongod</code> en configuración de <em>replica set</em> para actuar como el <em>shard aquila</em></li>
<li>3 <code>mongod</code> en configuración de <em>replica set</em> para actuar como el <em>shard lyra</em></li>
<li>3 <code>mongod</code> en configuración de <em>replica set</em> para actuar como el <em>shard cygnus</em></li>
</ul>
<p>El contenedor para ejecutar el cliente <code>mongo</code> no es necesario; lo normal es que cada aplicación consuma directamente los procesos <code>mongos</code> utilizando el <em>driver</em>. Para operar el <em>cluster</em> vamos a levantar el cliente de forma puntual, eliminando el contenedor al acabar.</p>
<p>Para facilitar el levantado de procesos, vamos a utilizar <strong>docker-compose</strong>; aquí os dejo el fichero <code>docker-compose.yml</code>.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/workspace/sharding$ cat docker-compose.yml 
version: <span class="s1">&#39;3&#39;</span>
services:
  mongos01:
    image: mongo-proxy
    container_name: mongos01
    hostname: mongos01
    volumes:
      - ./mongos.conf:/etc/mongos.conf:ro
    restart: always
  config01:
    image: mongo-server
    container_name: config01
    hostname: config01
    volumes:
      - ./mongod_config.conf:/etc/mongod.conf:ro
    restart: always
  config02:
    image: mongo-server
    container_name: config02
    hostname: config02
    volumes:
      - ./mongod_config.conf:/etc/mongod.conf:ro
    restart: always
  config03:
    image: mongo-server
    container_name: config03
    hostname: config03
    volumes:
      - ./mongod_config.conf:/etc/mongod.conf:ro
    restart: always
  aquila01:
    image: mongo-server
    container_name: aquila01
    hostname: aquila01
    volumes:
      - ./mongod_aquila.conf:/etc/mongod.conf:ro
    restart: always
  aquila02:
    image: mongo-server
    container_name: aquila02
    hostname: aquila02
    volumes:
      - ./mongod_aquila.conf:/etc/mongod.conf:ro
    restart: always
  aquila03:
    image: mongo-server
    container_name: aquila03
    hostname: aquila03
    volumes:
      - ./mongod_aquila.conf:/etc/mongod.conf:ro
    restart: always
  lyra01:
    image: mongo-server
    container_name: lyra01
    hostname: lyra01
    volumes:
      - ./mongod_lyra.conf:/etc/mongod.conf:ro
    restart: always
  lyra02:
    image: mongo-server
    container_name: lyra02
    hostname: lyra02
    volumes:
      - ./mongod_lyra.conf:/etc/mongod.conf:ro
    restart: always
  lyra03:
    image: mongo-server
    container_name: lyra03
    hostname: lyra03
    volumes:
      - ./mongod_lyra.conf:/etc/mongod.conf:ro
    restart: always
  cygnus01:
    image: mongo-server
    container_name: cygnus01
    hostname: cygnus01
    volumes:
      - ./mongod_cygnus.conf:/etc/mongod.conf:ro
    restart: always
  cygnus02:
    image: mongo-server
    container_name: cygnus02
    hostname: cygnus02
    volumes:
      - ./mongod_cygnus.conf:/etc/mongod.conf:ro
    restart: always
  cygnus03:
    image: mongo-server
    container_name: cygnus03
    hostname: cygnus03
    volumes:
      - ./mongod_cygnus.conf:/etc/mongod.conf:ro
    restart: always
gerard@sirius:~/workspace/sharding$ 
</pre></div>


<p><strong>NOTA</strong>: Es importante que el <em>hostname</em> y el <em>container_name</em> sean el mismo; las <em>replicas</em> utilizan el <em>hostname</em> para su descubrimiento, pero el <em>container_name</em> al conectarse entre ellas.</p>
<p>Cada elemento dentro del <em>cluster</em> necesita un parámetro <code>replSetName</code> indicando el nombre de la <em>replica set</em> a la que pertenecen. Otro parámetro cambiante es el <code>clusterRole</code>, dependiendo si la <em>replica set</em> va a ejercer como <em>config server</em> o como <em>shard</em>. Los miembros del mismo <em>replica set</em> comparten configuración, así que solo necesitamos 4 distintas.</p>
<p>Empezaremos exponiendo la configuración de los <em>config server</em>:</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/workspace/sharding$ cat mongod_config.conf 
processManagement:
  fork: <span class="nb">false</span>

net:
  bindIp: <span class="m">0</span>.0.0.0
  port: <span class="m">27019</span>
  unixDomainSocket:
    enabled: <span class="nb">false</span>

storage:
  dbPath: /srv/mongodb
  engine: wiredTiger
  journal:
    enabled: <span class="nb">true</span>

replication:
  replSetName: config

sharding:
  clusterRole: configsvr
gerard@sirius:~/workspace/sharding$ 
</pre></div>


<p>La configuración de los <em>shards</em> es prácticamente la misma; solo hace falta cambiar el <code>clusterRole</code> el <code>replSetName</code> y el puerto usado. Empezaremos exponiendo la configuración del primer <em>shard</em>:</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/workspace/sharding$ cat mongod_aquila.conf 
processManagement:
  fork: <span class="nb">false</span>

net:
  bindIp: <span class="m">0</span>.0.0.0
  port: <span class="m">27018</span>
  unixDomainSocket:
    enabled: <span class="nb">false</span>

storage:
  dbPath: /srv/mongodb
  engine: wiredTiger
  journal:
    enabled: <span class="nb">true</span>

replication:
  replSetName: aquila

sharding:
  clusterRole: shardsvr
gerard@sirius:~/workspace/sharding$ 
</pre></div>


<p><strong>NOTA</strong>: El <em>cluster</em> original ponía el árbitro en otro puerto para poder ir a la misma máquina. Esto ya no es necesario con <strong>docker</strong> y nos ahorra poner una configuración nueva.</p>
<p>Los otros <em>shards</em> son prácticamente iguales, cambiando solamente el nombre de la <em>replica set</em>:</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/workspace/sharding$ diff mongod_aquila.conf mongod_lyra.conf 
17c17
&lt;   replSetName: aquila
---
&gt;   replSetName: lyra
gerard@sirius:~/workspace/sharding$ diff mongod_aquila.conf mongod_cygnus.conf 
17c17
&lt;   replSetName: aquila
---
&gt;   replSetName: cygnus
gerard@sirius:~/workspace/sharding$ 
</pre></div>


<p>Y con esto tenemos todo lo necesario para levantar los procesos, así que no lo demoramos más.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/workspace/sharding$ docker-compose up -d
Creating network <span class="s2">&quot;sharding_default&quot;</span> with the default driver
Creating cygnus03
Creating config03
Creating mongos01
Creating aquila02
Creating lyra03
Creating cygnus02
Creating cygnus01
Creating config01
Creating lyra01
Creating aquila03
Creating lyra02
Creating config02
Creating aquila01
gerard@sirius:~/workspace/sharding$ 
</pre></div>


<h2>Atando el cluster</h2>
<p>Para atar completamente el <em>cluster</em> se necesita hacer dos cosas:</p>
<ul>
<li>Atar los <em>replica sets</em> que conformarán los <em>shards</em> y los <em>config server</em></li>
<li>Añadir los <em>shards</em> ya atados a través de un <em>mongos</em></li>
</ul>
<p>Estas tareas administrativas requieren de un cliente <code>mongo</code> que no queremos tener de forma permanente, así que tendremos un contenedor de "usar y tirar". De esta forma, cuando acabemos lo destruiremos y no tendremos partes innecesarias.</p>
<p>Levantar un contenedor con la imagen que contiene el cliente <code>mongo</code> no tiene misterio. El único detalle es que lo vamos a añadir a la misma red que creó el <em>docker-compose.yml</em>; eso nos garantiza que podamos usar los <em>container_name</em> en vez de ir buscando las direcciones IP de cada contenedor.</p>
<div class="highlight"><pre><span></span>gerard@sirius:~/workspace/sharding$ docker run -ti --rm --net sharding_default mongo-client
/ $ 
</pre></div>


<p><strong>TRUCO</strong>: A partir de aquí todos los comandos se hacen en el <em>shell</em> de <em>alpine linux</em>. Desde esta sesión interactiva, vamos a ir abriendo sesiones de <em>mongo shell</em> contra los procesos <code>mongod</code> o <code>mongos</code> que nos haga falta.</p>
<p>Atar los <em>replica sets</em> es siempre igual: entramos en uno de los miembros y le damos una configuración; otra opción es iniciar uno solo de los miembros y añadir los otros.</p>
<p>Empezaremos con los <em>config servers</em>, que a partir de la versión 3.2 de <strong>mongodb</strong> pueden ser <em>replica sets</em>, y que deben serlo a partir de la versión 3.4 (la que usamos). Entraremos en <em>config01</em> y lo inicializamos, para añadir los otros dos en el mismo <em>mongo shell</em>.</p>
<div class="highlight"><pre><span></span>/ $ mongo --host config01 --port <span class="m">27019</span>
...
&gt; rs.initiate<span class="o">()</span>
<span class="o">{</span>
    <span class="s2">&quot;info2&quot;</span> : <span class="s2">&quot;no configuration specified. Using a default configuration for the set&quot;</span>,
    <span class="s2">&quot;me&quot;</span> : <span class="s2">&quot;config01:27019&quot;</span>,
    <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span>
<span class="o">}</span>
config:PRIMARY&gt; rs.add<span class="o">(</span><span class="s2">&quot;config02:27019&quot;</span><span class="o">)</span>
<span class="o">{</span> <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span> <span class="o">}</span>
config:PRIMARY&gt; rs.add<span class="o">(</span><span class="s2">&quot;config03:27019&quot;</span><span class="o">)</span>
<span class="o">{</span> <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span> <span class="o">}</span>
config:PRIMARY&gt; <span class="nb">exit</span>
bye
/ $ 
</pre></div>


<p><strong>NOTA</strong>: Los <em>replica sets</em> destinados a ser <em>config servers</em> no pueden contener árbitros; si lo intentáis, obtendréis un bonito mensaje de error, pero no habrá consecuencias.</p>
<p>Repetiremos la fórmula para cada uno de los otros <em>shards</em>; entramos en el primer contenedor de cada <em>shard</em>, donde lo inicializamos y añadimos los otros dos. Para ser fieles al artículo original, el tercer contenedor de cada <em>shard</em> será un árbitro.</p>
<div class="highlight"><pre><span></span>/ $ mongo --host aquila01 --port <span class="m">27018</span>
...
&gt; rs.initiate<span class="o">()</span>
<span class="o">{</span>
    <span class="s2">&quot;info2&quot;</span> : <span class="s2">&quot;no configuration specified. Using a default configuration for the set&quot;</span>,
    <span class="s2">&quot;me&quot;</span> : <span class="s2">&quot;aquila01:27018&quot;</span>,
    <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span>
<span class="o">}</span>
aquila:PRIMARY&gt; rs.add<span class="o">(</span><span class="s2">&quot;aquila02:27018&quot;</span><span class="o">)</span>
<span class="o">{</span> <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span> <span class="o">}</span>
aquila:PRIMARY&gt; rs.addArb<span class="o">(</span><span class="s2">&quot;aquila03:27018&quot;</span><span class="o">)</span>
<span class="o">{</span> <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span> <span class="o">}</span>
aquila:PRIMARY&gt; <span class="nb">exit</span>
bye
/ $ 
</pre></div>


<div class="highlight"><pre><span></span>/ $ mongo --host lyra01 --port <span class="m">27018</span>
...
&gt; rs.initiate<span class="o">()</span>
<span class="o">{</span>
    <span class="s2">&quot;info2&quot;</span> : <span class="s2">&quot;no configuration specified. Using a default configuration for the set&quot;</span>,
    <span class="s2">&quot;me&quot;</span> : <span class="s2">&quot;lyra01:27018&quot;</span>,
    <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span>
<span class="o">}</span>
lyra:PRIMARY&gt; rs.add<span class="o">(</span><span class="s2">&quot;lyra02:27018&quot;</span><span class="o">)</span>
<span class="o">{</span> <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span> <span class="o">}</span>
lyra:PRIMARY&gt; rs.addArb<span class="o">(</span><span class="s2">&quot;lyra03:27018&quot;</span><span class="o">)</span>
<span class="o">{</span> <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span> <span class="o">}</span>
lyra:PRIMARY&gt; <span class="nb">exit</span>
bye
/ $ 
</pre></div>


<div class="highlight"><pre><span></span>/ $ mongo --host cygnus01 --port <span class="m">27018</span>
...
&gt; rs.initiate<span class="o">()</span>
<span class="o">{</span>
    <span class="s2">&quot;info2&quot;</span> : <span class="s2">&quot;no configuration specified. Using a default configuration for the set&quot;</span>,
    <span class="s2">&quot;me&quot;</span> : <span class="s2">&quot;cygnus01:27018&quot;</span>,
    <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span>
<span class="o">}</span>
cygnus:PRIMARY&gt; rs.add<span class="o">(</span><span class="s2">&quot;cygnus02:27018&quot;</span><span class="o">)</span>
<span class="o">{</span> <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span> <span class="o">}</span>
cygnus:PRIMARY&gt; rs.addArb<span class="o">(</span><span class="s2">&quot;cygnus03:27018&quot;</span><span class="o">)</span>
<span class="o">{</span> <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span> <span class="o">}</span>
cygnus:PRIMARY&gt; <span class="nb">exit</span>
bye
/ $ 
</pre></div>


<p>Ahora tenemos 4 <em>replica sets</em>, uno configurado como <em>config server</em> y apuntado por el proceso <code>mongos</code>, y otros 3 que serán los <em>shards</em>. Vamos a iniciar un <em>mongo shell</em> contra el proceso <code>mongos</code>, desde donde vamos a acabar las configuraciones.</p>
<div class="highlight"><pre><span></span>/ $ mongo --host mongos01 --port <span class="m">27017</span>
...
mongos&gt; 
</pre></div>


<p>De hecho, en este punto ya tenemos un <em>cluster</em> funcional, pero como no tiene <em>shards</em>, no hay donde guardar datos.</p>
<div class="highlight"><pre><span></span>mongos&gt; sh.status<span class="o">()</span>
--- Sharding Status --- 
  sharding version: <span class="o">{</span>
    <span class="s2">&quot;_id&quot;</span> : <span class="m">1</span>,
    <span class="s2">&quot;minCompatibleVersion&quot;</span> : <span class="m">5</span>,
    <span class="s2">&quot;currentVersion&quot;</span> : <span class="m">6</span>,
    <span class="s2">&quot;clusterId&quot;</span> : ObjectId<span class="o">(</span><span class="s2">&quot;5b182ae62446c4f43cbab312&quot;</span><span class="o">)</span>
  <span class="o">}</span>
  shards:
  active mongoses:
        <span class="s2">&quot;3.4.10&quot;</span> : <span class="m">1</span>
  autosplit:
        Currently enabled: yes
  balancer:
        Currently enabled:  yes
        Currently running:  no
NaN
        Failed balancer rounds in last <span class="m">5</span> attempts:  <span class="m">0</span>
        Migration Results <span class="k">for</span> the last <span class="m">24</span> hours: 
                No recent migrations
  databases:

mongos&gt; 
</pre></div>


<p>Para añadir <em>shards</em> solamente tenemos que utilizar el método <code>sh.addShard()</code> para especificar la <em>replica set</em> que va a actuar como <em>shard</em>; hay que añadir la <em>replica set</em> siguiendo la fórmula <code>rsName/server1:port,...,serverN:port</code>, aunque si especificamos uno solo nombre, basta.</p>
<div class="highlight"><pre><span></span>mongos&gt; sh.addShard<span class="o">(</span><span class="s2">&quot;aquila/aquila01:27018&quot;</span><span class="o">)</span>
<span class="o">{</span> <span class="s2">&quot;shardAdded&quot;</span> : <span class="s2">&quot;aquila&quot;</span>, <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span> <span class="o">}</span>
mongos&gt; 
</pre></div>


<p><strong>TRUCO</strong>: A pesar de haber dado solamente el nombre <em>aquila01</em>, el resto de servidores ha sido descubierto por el <em>cluster</em> de forma automática; aún así, los árbitros no aparecen en el listado.</p>
<div class="highlight"><pre><span></span>mongos&gt; sh.status<span class="o">()</span>
--- Sharding Status --- 
  sharding version: <span class="o">{</span>
    <span class="s2">&quot;_id&quot;</span> : <span class="m">1</span>,
    <span class="s2">&quot;minCompatibleVersion&quot;</span> : <span class="m">5</span>,
    <span class="s2">&quot;currentVersion&quot;</span> : <span class="m">6</span>,
    <span class="s2">&quot;clusterId&quot;</span> : ObjectId<span class="o">(</span><span class="s2">&quot;5b182ae62446c4f43cbab312&quot;</span><span class="o">)</span>
  <span class="o">}</span>
  shards:
        <span class="o">{</span>  <span class="s2">&quot;_id&quot;</span> : <span class="s2">&quot;aquila&quot;</span>,  <span class="s2">&quot;host&quot;</span> : <span class="s2">&quot;aquila/aquila01:27018,aquila02:27018&quot;</span>,  <span class="s2">&quot;state&quot;</span> : <span class="m">1</span> <span class="o">}</span>
  active mongoses:
        <span class="s2">&quot;3.4.10&quot;</span> : <span class="m">1</span>
  autosplit:
        Currently enabled: yes
  balancer:
        Currently enabled:  yes
        Currently running:  no
NaN
        Failed balancer rounds in last <span class="m">5</span> attempts:  <span class="m">0</span>
        Migration Results <span class="k">for</span> the last <span class="m">24</span> hours: 
                No recent migrations
  databases:

mongos&gt; 
</pre></div>


<p>Vamos a repetir la fórmula para añadir los otros <em>shards</em>, que es básicamente la misma:</p>
<div class="highlight"><pre><span></span>mongos&gt; sh.addShard<span class="o">(</span><span class="s2">&quot;lyra/lyra01:27018&quot;</span><span class="o">)</span>
<span class="o">{</span> <span class="s2">&quot;shardAdded&quot;</span> : <span class="s2">&quot;lyra&quot;</span>, <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span> <span class="o">}</span>
mongos&gt; sh.addShard<span class="o">(</span><span class="s2">&quot;cygnus/cygnus01:27018&quot;</span><span class="o">)</span>
<span class="o">{</span> <span class="s2">&quot;shardAdded&quot;</span> : <span class="s2">&quot;cygnus&quot;</span>, <span class="s2">&quot;ok&quot;</span> : <span class="m">1</span> <span class="o">}</span>
mongos&gt; 
</pre></div>


<p>Y de esta forma, ya podemos ver el <em>cluster</em> acabado, con sus 3 <em>shards</em> añadidos sin problemas.</p>
<div class="highlight"><pre><span></span>mongos&gt; sh.status<span class="o">()</span>
--- Sharding Status --- 
  sharding version: <span class="o">{</span>
    <span class="s2">&quot;_id&quot;</span> : <span class="m">1</span>,
    <span class="s2">&quot;minCompatibleVersion&quot;</span> : <span class="m">5</span>,
    <span class="s2">&quot;currentVersion&quot;</span> : <span class="m">6</span>,
    <span class="s2">&quot;clusterId&quot;</span> : ObjectId<span class="o">(</span><span class="s2">&quot;5b182ae62446c4f43cbab312&quot;</span><span class="o">)</span>
  <span class="o">}</span>
  shards:
        <span class="o">{</span>  <span class="s2">&quot;_id&quot;</span> : <span class="s2">&quot;aquila&quot;</span>,  <span class="s2">&quot;host&quot;</span> : <span class="s2">&quot;aquila/aquila01:27018,aquila02:27018&quot;</span>,  <span class="s2">&quot;state&quot;</span> : <span class="m">1</span> <span class="o">}</span>
        <span class="o">{</span>  <span class="s2">&quot;_id&quot;</span> : <span class="s2">&quot;cygnus&quot;</span>,  <span class="s2">&quot;host&quot;</span> : <span class="s2">&quot;cygnus/cygnus01:27018,cygnus02:27018&quot;</span>,  <span class="s2">&quot;state&quot;</span> : <span class="m">1</span> <span class="o">}</span>
        <span class="o">{</span>  <span class="s2">&quot;_id&quot;</span> : <span class="s2">&quot;lyra&quot;</span>,  <span class="s2">&quot;host&quot;</span> : <span class="s2">&quot;lyra/lyra01:27018,lyra02:27018&quot;</span>,  <span class="s2">&quot;state&quot;</span> : <span class="m">1</span> <span class="o">}</span>
  active mongoses:
        <span class="s2">&quot;3.4.10&quot;</span> : <span class="m">1</span>
  autosplit:
        Currently enabled: yes
  balancer:
        Currently enabled:  yes
        Currently running:  no
NaN
        Failed balancer rounds in last <span class="m">5</span> attempts:  <span class="m">0</span>
        Migration Results <span class="k">for</span> the last <span class="m">24</span> hours: 
                No recent migrations
  databases:

mongos&gt; 
</pre></div>


<p>Como no necesitamos más el contenedor del <em>mongo shell</em>, salimos de él para que el sistema lo pueda reciclar.</p>
<div class="highlight"><pre><span></span>mongos&gt; <span class="nb">exit</span>
bye
/ $ <span class="nb">exit</span>
gerard@sirius:~/workspace/sharding$ 
</pre></div>


<p>Y con esto estamos listos para introducir nuestros datos, aunque añadir más procesos <code>mongos</code> nos dará alta disponibilidad para el acceso de nuestras aplicaciones, aunque los <em>shards</em> y los <em>config servers</em> ya disfrutan de ella.</p>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Posts relacionados:</h4>
    <ul>
        <li><a href="https://www.linuxsysadmin.ml/2018/01/automatizando-el-setup-de-un-mongo-replica-set-en-docker.html">Automatizando el setup de un mongo replica set en docker</a></li>
        <li><a href="https://www.linuxsysadmin.ml/2016/05/mongodb-sharding-con-ansible.html">MongoDB sharding con ansible</a></li>
        <li><a href="https://www.linuxsysadmin.ml/2018/04/alta-disponibilidad-con-docker-swarm.html">Alta disponibilidad con Docker Swarm</a></li>
    </ul>
</section>
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'linuxsysadmin-gmb'; // required: replace example with your forum shortname

                    var disqus_identifier = 'mongodb-sharding-con-docker';
                var disqus_url = 'https://www.linuxsysadmin.ml/2018/07/mongodb-sharding-con-docker.html';

            var disqus_config = function () {
                this.language = "es";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://github.com/sirtea"><i class="fa fa-github-square fa-lg"></i> GitHub</a></li>
              </ul>
            </li>


            <li class="list-group-item"><a href="https://www.linuxsysadmin.ml/categories.html"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categorías</span></h4></a>
                <ul class="list-group" id="categories">
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/desarrollo.html">
                            <i class="fa fa-folder-open fa-lg"></i> Desarrollo
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/miscelanea.html">
                            <i class="fa fa-folder-open fa-lg"></i> Miscelánea
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/operaciones.html">
                            <i class="fa fa-folder-open fa-lg"></i> Operaciones
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/seguridad.html">
                            <i class="fa fa-folder-open fa-lg"></i> Seguridad
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/sistemas.html">
                            <i class="fa fa-folder-open fa-lg"></i> Sistemas
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://www.linuxsysadmin.ml/category/virtualizacion.html">
                            <i class="fa fa-folder-open fa-lg"></i> Virtualización
                        </a>
                    </li>
                </ul>
            </li>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Sidebar linuxsysadmin -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6984858420847602"
     data-ad-slot="1931313371"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

            <li class="list-group-item"><a href="https://www.linuxsysadmin.ml/tags.html"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group list-inline tagcloud" id="tags">
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/2-way-ssl.html">
                            2 way ssl
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/ansible.html">
                            ansible
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/api.html">
                            api
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/apt.html">
                            apt
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/archlinux.html">
                            archlinux
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/autenticacion.html">
                            autenticación
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/authorized_keys.html">
                            authorized_keys
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/balanceador.html">
                            balanceador
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/bash.html">
                            bash
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/basico.html">
                            básico
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/blog.html">
                            blog
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/bloques-reservados.html">
                            bloques reservados
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/bridge.html">
                            bridge
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/build.html">
                            build
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/cache.html">
                            cache
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/centos.html">
                            centos
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/certificado.html">
                            certificado
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/cluster.html">
                            cluster
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/consul.html">
                            consul
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/contenedor.html">
                            contenedor
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/css.html">
                            CSS
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/curl.html">
                            curl
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/debian.html">
                            debian
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/debootstrap.html">
                            debootstrap
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/dig.html">
                            dig
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/dns.html">
                            dns
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/dnsmasq.html">
                            dnsmasq
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/docker.html">
                            docker
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/docker-compose.html">
                            docker-compose
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/dockerfile.html">
                            Dockerfile
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/drill.html">
                            drill
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/escritorio.html">
                            escritorio
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/failover.html">
                            failover
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/firehol.html">
                            firehol
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/flask.html">
                            flask
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/framework.html">
                            framework
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/gateway.html">
                            gateway
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/ghost.html">
                            ghost
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/git.html">
                            git
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/haproxy.html">
                            haproxy
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/histfile.html">
                            histfile
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/html.html">
                            html
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/https.html">
                            https
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/jaula.html">
                            jaula
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/jessie.html">
                            jessie
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/json.html">
                            JSON
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/jsonschema.html">
                            jsonschema
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/keepalived.html">
                            keepalived
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/linux.html">
                            linux
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/logical-volume-manager.html">
                            logical volume manager
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/logs.html">
                            logs
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/logstash.html">
                            logstash
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/lvm.html">
                            lvm
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/lxc.html">
                            lxc
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/markdown.html">
                            markdown
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/microframework.html">
                            microframework
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/migracion.html">
                            migración
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/mongodb.html">
                            mongodb
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/mount.html">
                            mount
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/nginx.html">
                            nginx
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/nmap.html">
                            nmap
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/passphrase.html">
                            passphrase
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/password.html">
                            password
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/pets-vs-cattle.html">
                            pets vs cattle
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/php.html">
                            php
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/playbook.html">
                            playbook
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/proxy.html">
                            proxy
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/pypi.html">
                            PyPI
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/python.html">
                            python
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/redhat.html">
                            redhat
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/remota.html">
                            remota
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/replica-set.html">
                            replica set
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/rest.html">
                            REST
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/rssh.html">
                            rssh
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/rsync.html">
                            rsync
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/s6.html">
                            s6
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/script.html">
                            script
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/service-discovery.html">
                            service discovery
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/sftp.html">
                            sftp
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/shadow.html">
                            shadow
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/sharding.html">
                            sharding
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/squashfs.html">
                            squashfs
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://www.linuxsysadmin.ml/tag/ssh.html">
                            ssh
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/sshfs.html">
                            sshfs
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/ssl.html">
                            ssl
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/stretch.html">
                            stretch
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/swarm.html">
                            swarm
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/systemd.html">
                            systemd
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/traefik.html">
                            traefik
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/tune2fs.html">
                            tune2fs
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/tunel.html">
                            túnel
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/ubuntu.html">
                            ubuntu
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://www.linuxsysadmin.ml/tag/unidad.html">
                            unidad
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/uwsgi.html">
                            uWSGI
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/variable.html">
                            variable
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/virtual-hosts.html">
                            virtual hosts
                        </a>
                    </li>
                    <li class="list-group-item tag-2">
                        <a href="https://www.linuxsysadmin.ml/tag/virtualenv.html">
                            virtualenv
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/volumenes.html">
                            volumenes
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/wheel.html">
                            wheel
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://www.linuxsysadmin.ml/tag/xfce.html">
                            xfce
                        </a>
                    </li>
                </ul>
            </li>


    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Gerard
            &middot; Generado por <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Volver arriba</a></p></div>
      </div>
   </div>
</footer>
<script src="https://www.linuxsysadmin.ml/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://www.linuxsysadmin.ml/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://www.linuxsysadmin.ml/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'linuxsysadmin-gmb'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-68486572-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>